⚠️ Google Maps API não disponível: geocode() got an unexpected keyword argument 'timeout'
INFO:gestao_visitas.services.redis_cache:🎭 Redis não disponível (Error 111 connecting to localhost:6379. Connection...), usando simulador automático
INFO:gestao_visitas.services.redis_simulator:🚀 Redis Simulator iniciado com sucesso
INFO:gestao_visitas.services.redis_simulator:🔌 Redis Simulator Client conectado (simulando localhost:6379/db0)
INFO:gestao_visitas.services.redis_simulator:🎭 Usando Redis Simulator em vez de redis://localhost:6379/0
INFO:gestao_visitas.services.redis_simulator:🚀 Redis Simulator iniciado com sucesso
INFO:gestao_visitas.services.redis_simulator:🔌 Redis Simulator Client conectado (simulando localhost:6379/db0)
INFO:gestao_visitas.services.redis_cache:🚀 Redis Simulator ativado com sucesso - performance total!
INFO:googlemaps.client:API queries_quota: 60
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
=== INICIANDO APP.PY CORRETO ===
✅ Compressão Flask-Compress ativada
✅ Arquivo .env carregado com sucesso
✅ Serviços PNSB inicializados com sucesso
✅ Google Maps API configurado com sucesso
💾 Backup automático criado: 20250706_213448
🔒 Sistema de backup automático iniciado
   📁 Diretório: gestao_visitas/backups_automaticos
   ⏰ Intervalo: 300 segundos
🔒 Sistema de backup automático ativado - suas visitas estão protegidas!
💰 Chat IA desabilitado para economizar custos. Defina CHAT_IA_HABILITADO=true para habilitar.
 * Serving Flask app 'app'
 * Debug mode: on
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:werkzeug: * Restarting with stat
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
⚠️ Google Maps API não disponível: geocode() got an unexpected keyword argument 'timeout'
INFO:gestao_visitas.services.redis_cache:🎭 Redis não disponível (Error 111 connecting to localhost:6379. Connection...), usando simulador automático
INFO:gestao_visitas.services.redis_simulator:🚀 Redis Simulator iniciado com sucesso
INFO:gestao_visitas.services.redis_simulator:🔌 Redis Simulator Client conectado (simulando localhost:6379/db0)
INFO:gestao_visitas.services.redis_simulator:🎭 Usando Redis Simulator em vez de redis://localhost:6379/0
INFO:gestao_visitas.services.redis_simulator:🚀 Redis Simulator iniciado com sucesso
INFO:gestao_visitas.services.redis_simulator:🔌 Redis Simulator Client conectado (simulando localhost:6379/db0)
INFO:gestao_visitas.services.redis_cache:🚀 Redis Simulator ativado com sucesso - performance total!
INFO:googlemaps.client:API queries_quota: 60
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 216-667-060
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:37:24] "GET / HTTP/1.1" 200 -
INFO:gestao_visitas.services.offline_maps_service:🗺️ Databases de cache offline inicializados
INFO:googlemaps.client:API queries_quota: 60
INFO:gestao_visitas.services.offline_maps_service:🗺️ Google Maps API inicializada para cache offline
INFO:googlemaps.client:API queries_quota: 60
INFO:gestao_visitas.services.route_optimizer:🗺️ Google Maps API inicializada e testada com sucesso
INFO:gestao_visitas.services.route_optimizer:🗺️ Iniciando otimização Nível 3 com 2 pontos
INFO:gestao_visitas.services.route_optimizer:🕰️ Buscando horários de atendimento reais...
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Itajaí - Prefeitura Itajaí, Itajaí, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Itajaí - Prefeitura Itajaí: {'is_open_now': False, 'weekday_text': ['Monday: 1:00\u2009–\u20097:00\u202fPM', 'Tuesday: 1:00\u2009–\u20097:00\u202fPM', 'Wednesday: 1:00\u2009–\u20097:00\u202fPM', 'Thursday: 1:00\u2009–\u20097:00\u202fPM', 'Friday: 1:00\u2009–\u20097:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1900'}, 'open': {'day': 1, 'time': '1300'}}, {'close': {'day': 2, 'time': '1900'}, 'open': {'day': 2, 'time': '1300'}}, {'close': {'day': 3, 'time': '1900'}, 'open': {'day': 3, 'time': '1300'}}, {'close': {'day': 4, 'time': '1900'}, 'open': {'day': 4, 'time': '1300'}}, {'close': {'day': 5, 'time': '1900'}, 'open': {'day': 5, 'time': '1300'}}], 'today_open': '13:00', 'today_close': '19:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Balneário Camboriú - Prefeitura Balneário Camboriú, Balneário Camboriú, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Balneário Camboriú - Prefeitura Balneário Camboriú: {'is_open_now': False, 'weekday_text': ['Monday: 12:00\u2009–\u20095:00\u202fPM', 'Tuesday: 12:00\u2009–\u20095:00\u202fPM', 'Wednesday: 12:00\u2009–\u20095:00\u202fPM', 'Thursday: 12:00\u2009–\u20095:00\u202fPM', 'Friday: 12:00\u2009–\u20095:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1700'}, 'open': {'day': 1, 'time': '1200'}}, {'close': {'day': 2, 'time': '1700'}, 'open': {'day': 2, 'time': '1200'}}, {'close': {'day': 3, 'time': '1700'}, 'open': {'day': 3, 'time': '1200'}}, {'close': {'day': 4, 'time': '1700'}, 'open': {'day': 4, 'time': '1200'}}, {'close': {'day': 5, 'time': '1700'}, 'open': {'day': 5, 'time': '1200'}}], 'today_open': '12:00', 'today_close': '17:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:✅ Matriz do Google Maps obtida: 2x2
INFO:gestao_visitas.services.route_optimizer:🕰️ Ajustando visita para abertura: 12:00
INFO:gestao_visitas.services.route_optimizer:✅ Otimização Nível 3 concluída com sucesso
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:38:25] "POST /api/otimizar-rotas HTTP/1.1" 200 -
INFO:werkzeug: * Detected change in '/mnt/c/users/ggmob/Cursor AI/Verificação Informantes PNSB/Agente IA/gestao_visitas/services/route_optimizer.py', reloading
=== INICIANDO APP.PY CORRETO ===
✅ Compressão Flask-Compress ativada
✅ Arquivo .env carregado com sucesso
✅ Serviços PNSB inicializados com sucesso
✅ Google Maps API configurado com sucesso
💾 Backup automático criado: 20250706_213452
🔒 Sistema de backup automático iniciado
   📁 Diretório: gestao_visitas/backups_automaticos
   ⏰ Intervalo: 300 segundos
🔒 Sistema de backup automático ativado - suas visitas estão protegidas!
💰 Chat IA desabilitado para economizar custos. Defina CHAT_IA_HABILITADO=true para habilitar.
🔧 Iniciando otimização para 2 visitas
✅ RouteOptimizer inicializado. Google Maps disponível: True
📍 Pontos convertidos: 2
   1. Itajaí - Itajaí - Prefeitura Itajaí
   2. Balneário Camboriú - Balneário Camboriú - Prefeitura Balneário Camboriú
🚀 Iniciando otimização com Google Maps...
✅ Resultado da otimização: sucesso=True
🛑 Sistema de backup automático parado
INFO:werkzeug: * Restarting with stat
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
⚠️ Google Maps API não disponível: geocode() got an unexpected keyword argument 'timeout'
INFO:gestao_visitas.services.redis_cache:🎭 Redis não disponível (Error 111 connecting to localhost:6379. Connection...), usando simulador automático
INFO:gestao_visitas.services.redis_simulator:🚀 Redis Simulator iniciado com sucesso
INFO:gestao_visitas.services.redis_simulator:🔌 Redis Simulator Client conectado (simulando localhost:6379/db0)
INFO:gestao_visitas.services.redis_simulator:🎭 Usando Redis Simulator em vez de redis://localhost:6379/0
INFO:gestao_visitas.services.redis_simulator:🚀 Redis Simulator iniciado com sucesso
INFO:gestao_visitas.services.redis_simulator:🔌 Redis Simulator Client conectado (simulando localhost:6379/db0)
INFO:gestao_visitas.services.redis_cache:🚀 Redis Simulator ativado com sucesso - performance total!
INFO:googlemaps.client:API queries_quota: 60
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 216-667-060
INFO:werkzeug: * Detected change in '/mnt/c/users/ggmob/Cursor AI/Verificação Informantes PNSB/Agente IA/gestao_visitas/services/route_optimizer.py', reloading
=== INICIANDO APP.PY CORRETO ===
✅ Compressão Flask-Compress ativada
✅ Arquivo .env carregado com sucesso
✅ Serviços PNSB inicializados com sucesso
✅ Google Maps API configurado com sucesso
💾 Backup automático criado: 20250706_213905
🔒 Sistema de backup automático iniciado
   📁 Diretório: gestao_visitas/backups_automaticos
   ⏰ Intervalo: 300 segundos
🔒 Sistema de backup automático ativado - suas visitas estão protegidas!
💰 Chat IA desabilitado para economizar custos. Defina CHAT_IA_HABILITADO=true para habilitar.
🛑 Sistema de backup automático parado
INFO:werkzeug: * Restarting with stat
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
⚠️ Google Maps API não disponível: geocode() got an unexpected keyword argument 'timeout'
INFO:gestao_visitas.services.redis_cache:🎭 Redis não disponível (Error 111 connecting to localhost:6379. Connection...), usando simulador automático
INFO:gestao_visitas.services.redis_simulator:🚀 Redis Simulator iniciado com sucesso
INFO:gestao_visitas.services.redis_simulator:🔌 Redis Simulator Client conectado (simulando localhost:6379/db0)
INFO:gestao_visitas.services.redis_simulator:🎭 Usando Redis Simulator em vez de redis://localhost:6379/0
INFO:gestao_visitas.services.redis_simulator:🚀 Redis Simulator iniciado com sucesso
INFO:gestao_visitas.services.redis_simulator:🔌 Redis Simulator Client conectado (simulando localhost:6379/db0)
INFO:gestao_visitas.services.redis_cache:🚀 Redis Simulator ativado com sucesso - performance total!
INFO:googlemaps.client:API queries_quota: 60
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 216-667-060
INFO:werkzeug: * Detected change in '/mnt/c/users/ggmob/Cursor AI/Verificação Informantes PNSB/Agente IA/gestao_visitas/services/route_optimizer.py', reloading
=== INICIANDO APP.PY CORRETO ===
✅ Compressão Flask-Compress ativada
✅ Arquivo .env carregado com sucesso
✅ Serviços PNSB inicializados com sucesso
✅ Google Maps API configurado com sucesso
💾 Backup automático criado: 20250706_213928
🔒 Sistema de backup automático iniciado
   📁 Diretório: gestao_visitas/backups_automaticos
   ⏰ Intervalo: 300 segundos
🔒 Sistema de backup automático ativado - suas visitas estão protegidas!
💰 Chat IA desabilitado para economizar custos. Defina CHAT_IA_HABILITADO=true para habilitar.
🛑 Sistema de backup automático parado
INFO:werkzeug: * Restarting with stat
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
⚠️ Google Maps API não disponível: geocode() got an unexpected keyword argument 'timeout'
INFO:gestao_visitas.services.redis_cache:🎭 Redis não disponível (Error 111 connecting to localhost:6379. Connection...), usando simulador automático
INFO:gestao_visitas.services.redis_simulator:🚀 Redis Simulator iniciado com sucesso
INFO:gestao_visitas.services.redis_simulator:🔌 Redis Simulator Client conectado (simulando localhost:6379/db0)
INFO:gestao_visitas.services.redis_simulator:🎭 Usando Redis Simulator em vez de redis://localhost:6379/0
INFO:gestao_visitas.services.redis_simulator:🚀 Redis Simulator iniciado com sucesso
INFO:gestao_visitas.services.redis_simulator:🔌 Redis Simulator Client conectado (simulando localhost:6379/db0)
INFO:gestao_visitas.services.redis_cache:🚀 Redis Simulator ativado com sucesso - performance total!
INFO:googlemaps.client:API queries_quota: 60
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 216-667-060
INFO:gestao_visitas.services.offline_maps_service:🗺️ Databases de cache offline inicializados
INFO:googlemaps.client:API queries_quota: 60
INFO:gestao_visitas.services.offline_maps_service:🗺️ Google Maps API inicializada para cache offline
INFO:googlemaps.client:API queries_quota: 60
INFO:gestao_visitas.services.route_optimizer:🗺️ Google Maps API inicializada e testada com sucesso
INFO:gestao_visitas.services.route_optimizer:🗺️ Iniciando otimização Nível 3 com 2 pontos
INFO:gestao_visitas.services.route_optimizer:🕰️ Buscando horários de atendimento reais...
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Itajaí - Prefeitura Itajaí, Itajaí, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Itajaí - Prefeitura Itajaí: {'is_open_now': False, 'weekday_text': ['Monday: 1:00\u2009–\u20097:00\u202fPM', 'Tuesday: 1:00\u2009–\u20097:00\u202fPM', 'Wednesday: 1:00\u2009–\u20097:00\u202fPM', 'Thursday: 1:00\u2009–\u20097:00\u202fPM', 'Friday: 1:00\u2009–\u20097:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1900'}, 'open': {'day': 1, 'time': '1300'}}, {'close': {'day': 2, 'time': '1900'}, 'open': {'day': 2, 'time': '1300'}}, {'close': {'day': 3, 'time': '1900'}, 'open': {'day': 3, 'time': '1300'}}, {'close': {'day': 4, 'time': '1900'}, 'open': {'day': 4, 'time': '1300'}}, {'close': {'day': 5, 'time': '1900'}, 'open': {'day': 5, 'time': '1300'}}], 'today_open': '13:00', 'today_close': '19:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Balneário Camboriú - Prefeitura Balneário Camboriú, Balneário Camboriú, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Balneário Camboriú - Prefeitura Balneário Camboriú: {'is_open_now': False, 'weekday_text': ['Monday: 12:00\u2009–\u20095:00\u202fPM', 'Tuesday: 12:00\u2009–\u20095:00\u202fPM', 'Wednesday: 12:00\u2009–\u20095:00\u202fPM', 'Thursday: 12:00\u2009–\u20095:00\u202fPM', 'Friday: 12:00\u2009–\u20095:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1700'}, 'open': {'day': 1, 'time': '1200'}}, {'close': {'day': 2, 'time': '1700'}, 'open': {'day': 2, 'time': '1200'}}, {'close': {'day': 3, 'time': '1700'}, 'open': {'day': 3, 'time': '1200'}}, {'close': {'day': 4, 'time': '1700'}, 'open': {'day': 4, 'time': '1200'}}, {'close': {'day': 5, 'time': '1700'}, 'open': {'day': 5, 'time': '1200'}}], 'today_open': '12:00', 'today_close': '17:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:✅ Matriz do Google Maps obtida: 2x2
INFO:gestao_visitas.services.route_optimizer:🕰️ Ajustando visita para abertura: 12:00
WARNING:gestao_visitas.services.route_optimizer:⚠️ Erro ao obter distância real: 'list' object has no attribute 'keys'
INFO:gestao_visitas.services.route_optimizer:✅ Otimização Nível 3 concluída com sucesso
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:40:11] "POST /api/otimizar-rotas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:40:42] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:40:43] "GET /api/visitas/progresso-mapa HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:40:43] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug: * Detected change in '/mnt/c/users/ggmob/Cursor AI/Verificação Informantes PNSB/Agente IA/gestao_visitas/services/route_optimizer.py', reloading
=== INICIANDO APP.PY CORRETO ===
✅ Compressão Flask-Compress ativada
✅ Arquivo .env carregado com sucesso
✅ Serviços PNSB inicializados com sucesso
✅ Google Maps API configurado com sucesso
💾 Backup automático criado: 20250706_213951
🔒 Sistema de backup automático iniciado
   📁 Diretório: gestao_visitas/backups_automaticos
   ⏰ Intervalo: 300 segundos
🔒 Sistema de backup automático ativado - suas visitas estão protegidas!
💰 Chat IA desabilitado para economizar custos. Defina CHAT_IA_HABILITADO=true para habilitar.
🔧 Iniciando otimização para 2 visitas
✅ RouteOptimizer inicializado. Google Maps disponível: True
📍 Pontos convertidos: 2
   1. Itajaí - Itajaí - Prefeitura Itajaí
   2. Balneário Camboriú - Balneário Camboriú - Prefeitura Balneário Camboriú
🚀 Iniciando otimização com Google Maps...
DEBUG: Item 0 tem point? SIM
DEBUG: Próximo item tem point? SIM
DEBUG: ❌ NÃO ENCONTROU distância para test2 → test1 na matrix
DEBUG: 📊 FALLBACK: Usando estimativa de distância: 15.00km para 30min de viagem
DEBUG: Item 1 tem point? SIM
✅ Resultado da otimização: sucesso=True
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
🛑 Sistema de backup automático parado
INFO:werkzeug: * Restarting with stat
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
⚠️ Google Maps API não disponível: geocode() got an unexpected keyword argument 'timeout'
INFO:gestao_visitas.services.redis_cache:🎭 Redis não disponível (Error 111 connecting to localhost:6379. Connection...), usando simulador automático
INFO:gestao_visitas.services.redis_simulator:🚀 Redis Simulator iniciado com sucesso
INFO:gestao_visitas.services.redis_simulator:🔌 Redis Simulator Client conectado (simulando localhost:6379/db0)
INFO:gestao_visitas.services.redis_simulator:🎭 Usando Redis Simulator em vez de redis://localhost:6379/0
INFO:gestao_visitas.services.redis_simulator:🚀 Redis Simulator iniciado com sucesso
INFO:gestao_visitas.services.redis_simulator:🔌 Redis Simulator Client conectado (simulando localhost:6379/db0)
INFO:gestao_visitas.services.redis_cache:🚀 Redis Simulator ativado com sucesso - performance total!
INFO:googlemaps.client:API queries_quota: 60
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 216-667-060
INFO:werkzeug: * Detected change in '/mnt/c/users/ggmob/Cursor AI/Verificação Informantes PNSB/Agente IA/gestao_visitas/services/route_optimizer.py', reloading
=== INICIANDO APP.PY CORRETO ===
✅ Compressão Flask-Compress ativada
✅ Arquivo .env carregado com sucesso
✅ Serviços PNSB inicializados com sucesso
✅ Google Maps API configurado com sucesso
💾 Backup automático criado: 20250706_214132
🔒 Sistema de backup automático iniciado
   📁 Diretório: gestao_visitas/backups_automaticos
   ⏰ Intervalo: 300 segundos
🔒 Sistema de backup automático ativado - suas visitas estão protegidas!
💰 Chat IA desabilitado para economizar custos. Defina CHAT_IA_HABILITADO=true para habilitar.
🛑 Sistema de backup automático parado
INFO:werkzeug: * Restarting with stat
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
⚠️ Google Maps API não disponível: geocode() got an unexpected keyword argument 'timeout'
INFO:gestao_visitas.services.redis_cache:🎭 Redis não disponível (Error 111 connecting to localhost:6379. Connection...), usando simulador automático
INFO:gestao_visitas.services.redis_simulator:🚀 Redis Simulator iniciado com sucesso
INFO:gestao_visitas.services.redis_simulator:🔌 Redis Simulator Client conectado (simulando localhost:6379/db0)
INFO:gestao_visitas.services.redis_simulator:🎭 Usando Redis Simulator em vez de redis://localhost:6379/0
INFO:gestao_visitas.services.redis_simulator:🚀 Redis Simulator iniciado com sucesso
INFO:gestao_visitas.services.redis_simulator:🔌 Redis Simulator Client conectado (simulando localhost:6379/db0)
INFO:gestao_visitas.services.redis_cache:🚀 Redis Simulator ativado com sucesso - performance total!
INFO:googlemaps.client:API queries_quota: 60
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 216-667-060
INFO:werkzeug: * Detected change in '/mnt/c/users/ggmob/Cursor AI/Verificação Informantes PNSB/Agente IA/gestao_visitas/services/route_optimizer.py', reloading
=== INICIANDO APP.PY CORRETO ===
✅ Compressão Flask-Compress ativada
✅ Arquivo .env carregado com sucesso
✅ Serviços PNSB inicializados com sucesso
✅ Google Maps API configurado com sucesso
💾 Backup automático criado: 20250706_214204
🔒 Sistema de backup automático iniciado
   📁 Diretório: gestao_visitas/backups_automaticos
   ⏰ Intervalo: 300 segundos
🔒 Sistema de backup automático ativado - suas visitas estão protegidas!
💰 Chat IA desabilitado para economizar custos. Defina CHAT_IA_HABILITADO=true para habilitar.
🛑 Sistema de backup automático parado
INFO:werkzeug: * Restarting with stat
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
⚠️ Google Maps API não disponível: geocode() got an unexpected keyword argument 'timeout'
INFO:gestao_visitas.services.redis_cache:🎭 Redis não disponível (Error 111 connecting to localhost:6379. Connection...), usando simulador automático
INFO:gestao_visitas.services.redis_simulator:🚀 Redis Simulator iniciado com sucesso
INFO:gestao_visitas.services.redis_simulator:🔌 Redis Simulator Client conectado (simulando localhost:6379/db0)
INFO:gestao_visitas.services.redis_simulator:🎭 Usando Redis Simulator em vez de redis://localhost:6379/0
INFO:gestao_visitas.services.redis_simulator:🚀 Redis Simulator iniciado com sucesso
INFO:gestao_visitas.services.redis_simulator:🔌 Redis Simulator Client conectado (simulando localhost:6379/db0)
INFO:gestao_visitas.services.redis_cache:🚀 Redis Simulator ativado com sucesso - performance total!
INFO:googlemaps.client:API queries_quota: 60
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 216-667-060
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:42:42] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:gestao_visitas.services.offline_maps_service:🗺️ Databases de cache offline inicializados
INFO:googlemaps.client:API queries_quota: 60
INFO:gestao_visitas.services.offline_maps_service:🗺️ Google Maps API inicializada para cache offline
INFO:googlemaps.client:API queries_quota: 60
INFO:gestao_visitas.services.route_optimizer:🗺️ Google Maps API inicializada e testada com sucesso
INFO:gestao_visitas.services.route_optimizer:🗺️ Iniciando otimização Nível 3 com 2 pontos
INFO:gestao_visitas.services.route_optimizer:🕰️ Buscando horários de atendimento reais...
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Itajaí - Prefeitura Itajaí, Itajaí, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Itajaí - Prefeitura Itajaí: {'is_open_now': False, 'weekday_text': ['Monday: 1:00\u2009–\u20097:00\u202fPM', 'Tuesday: 1:00\u2009–\u20097:00\u202fPM', 'Wednesday: 1:00\u2009–\u20097:00\u202fPM', 'Thursday: 1:00\u2009–\u20097:00\u202fPM', 'Friday: 1:00\u2009–\u20097:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1900'}, 'open': {'day': 1, 'time': '1300'}}, {'close': {'day': 2, 'time': '1900'}, 'open': {'day': 2, 'time': '1300'}}, {'close': {'day': 3, 'time': '1900'}, 'open': {'day': 3, 'time': '1300'}}, {'close': {'day': 4, 'time': '1900'}, 'open': {'day': 4, 'time': '1300'}}, {'close': {'day': 5, 'time': '1900'}, 'open': {'day': 5, 'time': '1300'}}], 'today_open': '13:00', 'today_close': '19:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Balneário Camboriú - Prefeitura Balneário Camboriú, Balneário Camboriú, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Balneário Camboriú - Prefeitura Balneário Camboriú: {'is_open_now': False, 'weekday_text': ['Monday: 12:00\u2009–\u20095:00\u202fPM', 'Tuesday: 12:00\u2009–\u20095:00\u202fPM', 'Wednesday: 12:00\u2009–\u20095:00\u202fPM', 'Thursday: 12:00\u2009–\u20095:00\u202fPM', 'Friday: 12:00\u2009–\u20095:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1700'}, 'open': {'day': 1, 'time': '1200'}}, {'close': {'day': 2, 'time': '1700'}, 'open': {'day': 2, 'time': '1200'}}, {'close': {'day': 3, 'time': '1700'}, 'open': {'day': 3, 'time': '1200'}}, {'close': {'day': 4, 'time': '1700'}, 'open': {'day': 4, 'time': '1200'}}, {'close': {'day': 5, 'time': '1700'}, 'open': {'day': 5, 'time': '1200'}}], 'today_open': '12:00', 'today_close': '17:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:✅ Matriz do Google Maps obtida: 2x2
INFO:gestao_visitas.services.route_optimizer:🕰️ Ajustando visita para abertura: 12:00
INFO:gestao_visitas.services.route_optimizer:✅ Otimização Nível 3 concluída com sucesso
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:43:01] "POST /api/otimizar-rotas HTTP/1.1" 200 -
INFO:gestao_visitas.services.offline_maps_service:🗺️ Databases de cache offline inicializados
INFO:googlemaps.client:API queries_quota: 60
INFO:gestao_visitas.services.offline_maps_service:🗺️ Google Maps API inicializada para cache offline
INFO:googlemaps.client:API queries_quota: 60
INFO:gestao_visitas.services.route_optimizer:🗺️ Google Maps API inicializada e testada com sucesso
INFO:gestao_visitas.services.route_optimizer:🗺️ Iniciando otimização Nível 3 com 2 pontos
INFO:gestao_visitas.services.route_optimizer:🕰️ Buscando horários de atendimento reais...
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Itajaí - Prefeitura Itajaí, Itajaí, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Itajaí - Prefeitura Itajaí: {'is_open_now': False, 'weekday_text': ['Monday: 1:00\u2009–\u20097:00\u202fPM', 'Tuesday: 1:00\u2009–\u20097:00\u202fPM', 'Wednesday: 1:00\u2009–\u20097:00\u202fPM', 'Thursday: 1:00\u2009–\u20097:00\u202fPM', 'Friday: 1:00\u2009–\u20097:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1900'}, 'open': {'day': 1, 'time': '1300'}}, {'close': {'day': 2, 'time': '1900'}, 'open': {'day': 2, 'time': '1300'}}, {'close': {'day': 3, 'time': '1900'}, 'open': {'day': 3, 'time': '1300'}}, {'close': {'day': 4, 'time': '1900'}, 'open': {'day': 4, 'time': '1300'}}, {'close': {'day': 5, 'time': '1900'}, 'open': {'day': 5, 'time': '1300'}}], 'today_open': '13:00', 'today_close': '19:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Balneário Camboriú - Prefeitura Balneário Camboriú, Balneário Camboriú, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Balneário Camboriú - Prefeitura Balneário Camboriú: {'is_open_now': False, 'weekday_text': ['Monday: 12:00\u2009–\u20095:00\u202fPM', 'Tuesday: 12:00\u2009–\u20095:00\u202fPM', 'Wednesday: 12:00\u2009–\u20095:00\u202fPM', 'Thursday: 12:00\u2009–\u20095:00\u202fPM', 'Friday: 12:00\u2009–\u20095:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1700'}, 'open': {'day': 1, 'time': '1200'}}, {'close': {'day': 2, 'time': '1700'}, 'open': {'day': 2, 'time': '1200'}}, {'close': {'day': 3, 'time': '1700'}, 'open': {'day': 3, 'time': '1200'}}, {'close': {'day': 4, 'time': '1700'}, 'open': {'day': 4, 'time': '1200'}}, {'close': {'day': 5, 'time': '1700'}, 'open': {'day': 5, 'time': '1200'}}], 'today_open': '12:00', 'today_close': '17:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:✅ Matriz do Google Maps obtida: 2x2
INFO:gestao_visitas.services.route_optimizer:🕰️ Ajustando visita para abertura: 12:00
INFO:gestao_visitas.services.route_optimizer:✅ Otimização Nível 3 concluída com sucesso
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:44:10] "POST /api/otimizar-rotas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:44:41] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:45:44] "GET /api/visitas/progresso-mapa HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:45:44] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug: * Detected change in '/mnt/c/users/ggmob/Cursor AI/Verificação Informantes PNSB/Agente IA/gestao_visitas/services/route_optimizer.py', reloading
=== INICIANDO APP.PY CORRETO ===
✅ Compressão Flask-Compress ativada
✅ Arquivo .env carregado com sucesso
✅ Serviços PNSB inicializados com sucesso
✅ Google Maps API configurado com sucesso
💾 Backup automático criado: 20250706_214235
🔒 Sistema de backup automático iniciado
   📁 Diretório: gestao_visitas/backups_automaticos
   ⏰ Intervalo: 300 segundos
🔒 Sistema de backup automático ativado - suas visitas estão protegidas!
💰 Chat IA desabilitado para economizar custos. Defina CHAT_IA_HABILITADO=true para habilitar.
🔧 Iniciando otimização para 2 visitas
✅ RouteOptimizer inicializado. Google Maps disponível: True
📍 Pontos convertidos: 2
   1. Itajaí - Itajaí - Prefeitura Itajaí
   2. Balneário Camboriú - Balneário Camboriú - Prefeitura Balneário Camboriú
🚀 Iniciando otimização com Google Maps...
DEBUG: Distance matrix keys: N/A
DEBUG: Item 0 tem point? SIM
DEBUG: Próximo item tem point? SIM
DEBUG: Procurando distância entre test2 → test1
DEBUG: ❌ NÃO ENCONTROU distância para test2 → test1 na matrix
DEBUG: distance_matrix['distances'] não é dict, é: <class 'list'>
DEBUG: 📊 FALLBACK: Usando estimativa de distância: 15.00km para 30min de viagem
DEBUG: Distance matrix keys: N/A
DEBUG: Item 1 tem point? SIM
✅ Resultado da otimização: sucesso=True
🔧 Iniciando otimização para 2 visitas
✅ RouteOptimizer inicializado. Google Maps disponível: True
📍 Pontos convertidos: 2
   1. Itajaí - Itajaí - Prefeitura Itajaí
   2. Balneário Camboriú - Balneário Camboriú - Prefeitura Balneário Camboriú
🚀 Iniciando otimização com Google Maps...
DEBUG: Distance matrix keys: N/A
DEBUG: Item 0 tem point? SIM
DEBUG: Próximo item tem point? SIM
DEBUG: Procurando distância entre test2 → test1
DEBUG: ❌ NÃO ENCONTROU distância para test2 → test1 na matrix
DEBUG: distance_matrix['distances'] não é dict, é: <class 'list'>
DEBUG: 📊 FALLBACK: Usando estimativa de distância: 15.00km para 30min de viagem
DEBUG: Distance matrix keys: N/A
DEBUG: Item 1 tem point? SIM
✅ Resultado da otimização: sucesso=True
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
🛑 Sistema de backup automático parado
INFO:werkzeug: * Restarting with stat
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
⚠️ Google Maps API não disponível: geocode() got an unexpected keyword argument 'timeout'
INFO:gestao_visitas.services.redis_cache:🎭 Redis não disponível (Error 111 connecting to localhost:6379. Connection...), usando simulador automático
INFO:gestao_visitas.services.redis_simulator:🚀 Redis Simulator iniciado com sucesso
INFO:gestao_visitas.services.redis_simulator:🔌 Redis Simulator Client conectado (simulando localhost:6379/db0)
INFO:gestao_visitas.services.redis_simulator:🎭 Usando Redis Simulator em vez de redis://localhost:6379/0
INFO:gestao_visitas.services.redis_simulator:🚀 Redis Simulator iniciado com sucesso
INFO:gestao_visitas.services.redis_simulator:🔌 Redis Simulator Client conectado (simulando localhost:6379/db0)
INFO:gestao_visitas.services.redis_cache:🚀 Redis Simulator ativado com sucesso - performance total!
INFO:googlemaps.client:API queries_quota: 60
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 216-667-060
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:46:50] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug: * Detected change in '/mnt/c/users/ggmob/Cursor AI/Verificação Informantes PNSB/Agente IA/gestao_visitas/services/route_optimizer.py', reloading
=== INICIANDO APP.PY CORRETO ===
✅ Compressão Flask-Compress ativada
✅ Arquivo .env carregado com sucesso
✅ Serviços PNSB inicializados com sucesso
✅ Google Maps API configurado com sucesso
💾 Backup automático criado: 20250706_214648
🔒 Sistema de backup automático iniciado
   📁 Diretório: gestao_visitas/backups_automaticos
   ⏰ Intervalo: 300 segundos
🔒 Sistema de backup automático ativado - suas visitas estão protegidas!
💰 Chat IA desabilitado para economizar custos. Defina CHAT_IA_HABILITADO=true para habilitar.
🛑 Sistema de backup automático parado
INFO:werkzeug: * Restarting with stat
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
⚠️ Google Maps API não disponível: geocode() got an unexpected keyword argument 'timeout'
INFO:gestao_visitas.services.redis_cache:🎭 Redis não disponível (Error 111 connecting to localhost:6379. Connection...), usando simulador automático
INFO:gestao_visitas.services.redis_simulator:🚀 Redis Simulator iniciado com sucesso
INFO:gestao_visitas.services.redis_simulator:🔌 Redis Simulator Client conectado (simulando localhost:6379/db0)
INFO:gestao_visitas.services.redis_simulator:🎭 Usando Redis Simulator em vez de redis://localhost:6379/0
INFO:gestao_visitas.services.redis_simulator:🚀 Redis Simulator iniciado com sucesso
INFO:gestao_visitas.services.redis_simulator:🔌 Redis Simulator Client conectado (simulando localhost:6379/db0)
INFO:gestao_visitas.services.redis_cache:🚀 Redis Simulator ativado com sucesso - performance total!
INFO:googlemaps.client:API queries_quota: 60
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 216-667-060
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:48:42] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:50:42] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:50:45] "GET /api/visitas/progresso-mapa HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:50:46] "GET /api/visitas HTTP/1.1" 200 -
INFO:gestao_visitas.services.offline_maps_service:🗺️ Databases de cache offline inicializados
INFO:googlemaps.client:API queries_quota: 60
INFO:gestao_visitas.services.offline_maps_service:🗺️ Google Maps API inicializada para cache offline
INFO:googlemaps.client:API queries_quota: 60
INFO:gestao_visitas.services.route_optimizer:🗺️ Google Maps API inicializada e testada com sucesso
INFO:gestao_visitas.services.route_optimizer:🗺️ Iniciando otimização Nível 3 com 2 pontos
INFO:gestao_visitas.services.route_optimizer:🕰️ Buscando horários de atendimento reais...
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Itajaí - Prefeitura Itajaí, Itajaí, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Itajaí - Prefeitura Itajaí: {'is_open_now': False, 'weekday_text': ['Monday: 1:00\u2009–\u20097:00\u202fPM', 'Tuesday: 1:00\u2009–\u20097:00\u202fPM', 'Wednesday: 1:00\u2009–\u20097:00\u202fPM', 'Thursday: 1:00\u2009–\u20097:00\u202fPM', 'Friday: 1:00\u2009–\u20097:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1900'}, 'open': {'day': 1, 'time': '1300'}}, {'close': {'day': 2, 'time': '1900'}, 'open': {'day': 2, 'time': '1300'}}, {'close': {'day': 3, 'time': '1900'}, 'open': {'day': 3, 'time': '1300'}}, {'close': {'day': 4, 'time': '1900'}, 'open': {'day': 4, 'time': '1300'}}, {'close': {'day': 5, 'time': '1900'}, 'open': {'day': 5, 'time': '1300'}}], 'today_open': '13:00', 'today_close': '19:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Balneário Camboriú - Prefeitura Balneário Camboriú, Balneário Camboriú, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Balneário Camboriú - Prefeitura Balneário Camboriú: {'is_open_now': False, 'weekday_text': ['Monday: 12:00\u2009–\u20095:00\u202fPM', 'Tuesday: 12:00\u2009–\u20095:00\u202fPM', 'Wednesday: 12:00\u2009–\u20095:00\u202fPM', 'Thursday: 12:00\u2009–\u20095:00\u202fPM', 'Friday: 12:00\u2009–\u20095:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1700'}, 'open': {'day': 1, 'time': '1200'}}, {'close': {'day': 2, 'time': '1700'}, 'open': {'day': 2, 'time': '1200'}}, {'close': {'day': 3, 'time': '1700'}, 'open': {'day': 3, 'time': '1200'}}, {'close': {'day': 4, 'time': '1700'}, 'open': {'day': 4, 'time': '1200'}}, {'close': {'day': 5, 'time': '1700'}, 'open': {'day': 5, 'time': '1200'}}], 'today_open': '12:00', 'today_close': '17:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:✅ Matriz do Google Maps obtida: 2x2
INFO:gestao_visitas.services.route_optimizer:🕰️ Ajustando visita para abertura: 12:00
INFO:gestao_visitas.services.route_optimizer:✅ Otimização Nível 3 concluída com sucesso
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:52:03] "POST /api/otimizar-rotas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:52:42] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug: * Detected change in '/mnt/c/users/ggmob/Cursor AI/Verificação Informantes PNSB/Agente IA/gestao_visitas/services/route_optimizer.py', reloading
=== INICIANDO APP.PY CORRETO ===
✅ Compressão Flask-Compress ativada
✅ Arquivo .env carregado com sucesso
✅ Serviços PNSB inicializados com sucesso
✅ Google Maps API configurado com sucesso
💾 Backup automático criado: 20250706_214736
🔒 Sistema de backup automático iniciado
   📁 Diretório: gestao_visitas/backups_automaticos
   ⏰ Intervalo: 300 segundos
🔒 Sistema de backup automático ativado - suas visitas estão protegidas!
💰 Chat IA desabilitado para economizar custos. Defina CHAT_IA_HABILITADO=true para habilitar.
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
🔧 Iniciando otimização para 2 visitas
✅ RouteOptimizer inicializado. Google Maps disponível: True
📍 Pontos convertidos: 2
   1. Itajaí - Itajaí - Prefeitura Itajaí
   2. Balneário Camboriú - Balneário Camboriú - Prefeitura Balneário Camboriú
🚀 Iniciando otimização com Google Maps...
DEBUG: distance_matrix['distances'] é tipo: <class 'list'>
DEBUG: Usando distância real da matrix[0][1]: 12.10km
DEBUG: Distance matrix keys: N/A
DEBUG: Item 0 tem point? SIM
DEBUG: Próximo item tem point? SIM
DEBUG: Procurando distância entre test2 → test1
DEBUG: ❌ NÃO ENCONTROU distância para test2 → test1 na matrix
DEBUG: distance_matrix['distances'] não é dict, é: <class 'list'>
DEBUG: 📊 FALLBACK: Usando estimativa de distância: 15.00km para 30min de viagem
DEBUG: Distance matrix keys: N/A
DEBUG: Item 1 tem point? SIM
✅ Resultado da otimização: sucesso=True
💾 Backup automático criado: 20250706_215246
🛑 Sistema de backup automático parado
INFO:werkzeug: * Restarting with stat
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
⚠️ Google Maps API não disponível: geocode() got an unexpected keyword argument 'timeout'
INFO:gestao_visitas.services.redis_cache:🎭 Redis não disponível (Error 111 connecting to localhost:6379. Connection...), usando simulador automático
INFO:gestao_visitas.services.redis_simulator:🚀 Redis Simulator iniciado com sucesso
INFO:gestao_visitas.services.redis_simulator:🔌 Redis Simulator Client conectado (simulando localhost:6379/db0)
INFO:gestao_visitas.services.redis_simulator:🎭 Usando Redis Simulator em vez de redis://localhost:6379/0
INFO:gestao_visitas.services.redis_simulator:🚀 Redis Simulator iniciado com sucesso
INFO:gestao_visitas.services.redis_simulator:🔌 Redis Simulator Client conectado (simulando localhost:6379/db0)
INFO:gestao_visitas.services.redis_cache:🚀 Redis Simulator ativado com sucesso - performance total!
INFO:googlemaps.client:API queries_quota: 60
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 216-667-060
INFO:gestao_visitas.services.offline_maps_service:🗺️ Databases de cache offline inicializados
INFO:googlemaps.client:API queries_quota: 60
INFO:gestao_visitas.services.offline_maps_service:🗺️ Google Maps API inicializada para cache offline
INFO:googlemaps.client:API queries_quota: 60
INFO:gestao_visitas.services.route_optimizer:🗺️ Google Maps API inicializada e testada com sucesso
INFO:gestao_visitas.services.route_optimizer:🗺️ Iniciando otimização Nível 3 com 2 pontos
INFO:gestao_visitas.services.route_optimizer:🕰️ Buscando horários de atendimento reais...
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Itajaí - Prefeitura Itajaí, Itajaí, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Itajaí - Prefeitura Itajaí: {'is_open_now': False, 'weekday_text': ['Monday: 1:00\u2009–\u20097:00\u202fPM', 'Tuesday: 1:00\u2009–\u20097:00\u202fPM', 'Wednesday: 1:00\u2009–\u20097:00\u202fPM', 'Thursday: 1:00\u2009–\u20097:00\u202fPM', 'Friday: 1:00\u2009–\u20097:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1900'}, 'open': {'day': 1, 'time': '1300'}}, {'close': {'day': 2, 'time': '1900'}, 'open': {'day': 2, 'time': '1300'}}, {'close': {'day': 3, 'time': '1900'}, 'open': {'day': 3, 'time': '1300'}}, {'close': {'day': 4, 'time': '1900'}, 'open': {'day': 4, 'time': '1300'}}, {'close': {'day': 5, 'time': '1900'}, 'open': {'day': 5, 'time': '1300'}}], 'today_open': '13:00', 'today_close': '19:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Balneário Camboriú - Prefeitura Balneário Camboriú, Balneário Camboriú, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Balneário Camboriú - Prefeitura Balneário Camboriú: {'is_open_now': False, 'weekday_text': ['Monday: 12:00\u2009–\u20095:00\u202fPM', 'Tuesday: 12:00\u2009–\u20095:00\u202fPM', 'Wednesday: 12:00\u2009–\u20095:00\u202fPM', 'Thursday: 12:00\u2009–\u20095:00\u202fPM', 'Friday: 12:00\u2009–\u20095:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1700'}, 'open': {'day': 1, 'time': '1200'}}, {'close': {'day': 2, 'time': '1700'}, 'open': {'day': 2, 'time': '1200'}}, {'close': {'day': 3, 'time': '1700'}, 'open': {'day': 3, 'time': '1200'}}, {'close': {'day': 4, 'time': '1700'}, 'open': {'day': 4, 'time': '1200'}}, {'close': {'day': 5, 'time': '1700'}, 'open': {'day': 5, 'time': '1200'}}], 'today_open': '12:00', 'today_close': '17:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:✅ Matriz do Google Maps obtida: 2x2
INFO:gestao_visitas.services.route_optimizer:🕰️ Ajustando visita para abertura: 12:00
INFO:gestao_visitas.services.route_optimizer:✅ Otimização Nível 3 concluída com sucesso
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:54:15] "POST /api/otimizar-rotas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:54:42] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug: * Detected change in '/mnt/c/users/ggmob/Cursor AI/Verificação Informantes PNSB/Agente IA/gestao_visitas/services/route_optimizer.py', reloading
=== INICIANDO APP.PY CORRETO ===
✅ Compressão Flask-Compress ativada
✅ Arquivo .env carregado com sucesso
✅ Serviços PNSB inicializados com sucesso
✅ Google Maps API configurado com sucesso
💾 Backup automático criado: 20250706_215336
🔒 Sistema de backup automático iniciado
   📁 Diretório: gestao_visitas/backups_automaticos
   ⏰ Intervalo: 300 segundos
🔒 Sistema de backup automático ativado - suas visitas estão protegidas!
💰 Chat IA desabilitado para economizar custos. Defina CHAT_IA_HABILITADO=true para habilitar.
🔧 Iniciando otimização para 2 visitas
✅ RouteOptimizer inicializado. Google Maps disponível: True
📍 Pontos convertidos: 2
   1. Itajaí - Itajaí - Prefeitura Itajaí
   2. Balneário Camboriú - Balneário Camboriú - Prefeitura Balneário Camboriú
🚀 Iniciando otimização com Google Maps...
DEBUG: distance_matrix['distances'] é tipo: <class 'list'>
DEBUG: Matrix é 2x2
DEBUG: ✅ Usando distância real entre pontos: 11.12km
DEBUG: Distance matrix keys: N/A
DEBUG: Item 0 tem point? SIM
DEBUG: Próximo item tem point? SIM
DEBUG: Procurando distância entre test2 → test1
DEBUG: ❌ NÃO ENCONTROU distância para test2 → test1 na matrix
DEBUG: distance_matrix['distances'] não é dict, é: <class 'list'>
DEBUG: 📊 FALLBACK: Usando estimativa de distância: 15.00km para 30min de viagem
DEBUG: Distance matrix keys: N/A
DEBUG: Item 1 tem point? SIM
✅ Resultado da otimização: sucesso=True
🛑 Sistema de backup automático parado
INFO:werkzeug: * Restarting with stat
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
⚠️ Google Maps API não disponível: geocode() got an unexpected keyword argument 'timeout'
INFO:gestao_visitas.services.redis_cache:🎭 Redis não disponível (Error 111 connecting to localhost:6379. Connection...), usando simulador automático
INFO:gestao_visitas.services.redis_simulator:🚀 Redis Simulator iniciado com sucesso
INFO:gestao_visitas.services.redis_simulator:🔌 Redis Simulator Client conectado (simulando localhost:6379/db0)
INFO:gestao_visitas.services.redis_simulator:🎭 Usando Redis Simulator em vez de redis://localhost:6379/0
INFO:gestao_visitas.services.redis_simulator:🚀 Redis Simulator iniciado com sucesso
INFO:gestao_visitas.services.redis_simulator:🔌 Redis Simulator Client conectado (simulando localhost:6379/db0)
INFO:gestao_visitas.services.redis_cache:🚀 Redis Simulator ativado com sucesso - performance total!
INFO:googlemaps.client:API queries_quota: 60
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 216-667-060
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:55:45] "GET /api/visitas/progresso-mapa HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:55:45] "GET /api/visitas HTTP/1.1" 200 -
INFO:gestao_visitas.services.offline_maps_service:🗺️ Databases de cache offline inicializados
INFO:googlemaps.client:API queries_quota: 60
INFO:gestao_visitas.services.offline_maps_service:🗺️ Google Maps API inicializada para cache offline
INFO:googlemaps.client:API queries_quota: 60
INFO:gestao_visitas.services.route_optimizer:🗺️ Google Maps API inicializada e testada com sucesso
INFO:gestao_visitas.services.route_optimizer:🗺️ Iniciando otimização Nível 3 com 2 pontos
INFO:gestao_visitas.services.route_optimizer:🕰️ Buscando horários de atendimento reais...
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Itajaí - Prefeitura Itajaí, Itajaí, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Itajaí - Prefeitura Itajaí: {'is_open_now': False, 'weekday_text': ['Monday: 1:00\u2009–\u20097:00\u202fPM', 'Tuesday: 1:00\u2009–\u20097:00\u202fPM', 'Wednesday: 1:00\u2009–\u20097:00\u202fPM', 'Thursday: 1:00\u2009–\u20097:00\u202fPM', 'Friday: 1:00\u2009–\u20097:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1900'}, 'open': {'day': 1, 'time': '1300'}}, {'close': {'day': 2, 'time': '1900'}, 'open': {'day': 2, 'time': '1300'}}, {'close': {'day': 3, 'time': '1900'}, 'open': {'day': 3, 'time': '1300'}}, {'close': {'day': 4, 'time': '1900'}, 'open': {'day': 4, 'time': '1300'}}, {'close': {'day': 5, 'time': '1900'}, 'open': {'day': 5, 'time': '1300'}}], 'today_open': '13:00', 'today_close': '19:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Balneário Camboriú - Prefeitura Balneário Camboriú, Balneário Camboriú, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Balneário Camboriú - Prefeitura Balneário Camboriú: {'is_open_now': False, 'weekday_text': ['Monday: 12:00\u2009–\u20095:00\u202fPM', 'Tuesday: 12:00\u2009–\u20095:00\u202fPM', 'Wednesday: 12:00\u2009–\u20095:00\u202fPM', 'Thursday: 12:00\u2009–\u20095:00\u202fPM', 'Friday: 12:00\u2009–\u20095:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1700'}, 'open': {'day': 1, 'time': '1200'}}, {'close': {'day': 2, 'time': '1700'}, 'open': {'day': 2, 'time': '1200'}}, {'close': {'day': 3, 'time': '1700'}, 'open': {'day': 3, 'time': '1200'}}, {'close': {'day': 4, 'time': '1700'}, 'open': {'day': 4, 'time': '1200'}}, {'close': {'day': 5, 'time': '1700'}, 'open': {'day': 5, 'time': '1200'}}], 'today_open': '12:00', 'today_close': '17:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:✅ Matriz do Google Maps obtida: 2x2
INFO:gestao_visitas.services.route_optimizer:🕰️ Ajustando visita para abertura: 12:00
INFO:gestao_visitas.services.route_optimizer:✅ Otimização Nível 3 concluída com sucesso
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:56:22] "POST /api/otimizar-rotas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:56:41] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:58:30] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:58:33] "GET /mapa-progresso HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:58:33] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:58:33] "GET /static/js/components.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:58:33] "GET /static/js/pwa.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:58:33] "GET /static/js/breadcrumbs-init.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:58:33] "GET /static/js/health-check.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:58:33] "GET /static/css/design-system.css HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:58:34] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:58:35] "GET /api/visitas/progresso-mapa HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:58:35] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:58:35] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:58:36] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:58:41] "GET /api/google-maps-config HTTP/1.1" 200 -
INFO:gestao_visitas.services.offline_maps_service:🗺️ Databases de cache offline inicializados
INFO:googlemaps.client:API queries_quota: 60
INFO:gestao_visitas.services.offline_maps_service:🗺️ Google Maps API inicializada para cache offline
INFO:googlemaps.client:API queries_quota: 60
INFO:gestao_visitas.services.route_optimizer:🗺️ Google Maps API inicializada e testada com sucesso
INFO:gestao_visitas.services.route_optimizer:🗺️ Iniciando otimização Nível 3 com 3 pontos
INFO:gestao_visitas.services.route_optimizer:🕰️ Buscando horários de atendimento reais...
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Porto Belo - Prefeitura, Porto Belo, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Porto Belo - Prefeitura: {'is_open_now': False, 'weekday_text': ['Monday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Tuesday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Wednesday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Thursday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Friday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1200'}, 'open': {'day': 1, 'time': '0800'}}, {'close': {'day': 1, 'time': '1700'}, 'open': {'day': 1, 'time': '1300'}}, {'close': {'day': 2, 'time': '1200'}, 'open': {'day': 2, 'time': '0800'}}, {'close': {'day': 2, 'time': '1700'}, 'open': {'day': 2, 'time': '1300'}}, {'close': {'day': 3, 'time': '1200'}, 'open': {'day': 3, 'time': '0800'}}, {'close': {'day': 3, 'time': '1700'}, 'open': {'day': 3, 'time': '1300'}}, {'close': {'day': 4, 'time': '1200'}, 'open': {'day': 4, 'time': '0800'}}, {'close': {'day': 4, 'time': '1700'}, 'open': {'day': 4, 'time': '1300'}}, {'close': {'day': 5, 'time': '1200'}, 'open': {'day': 5, 'time': '0800'}}, {'close': {'day': 5, 'time': '1700'}, 'open': {'day': 5, 'time': '1300'}}], 'today_open': '08:00', 'today_close': '12:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Bombinhas - Prefeitura - Vigilância Sanitária, Bombinhas, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Bombinhas - Prefeitura - Vigilância Sanitária: {'is_open_now': False, 'weekday_text': ['Monday: 12:00\u2009–\u20095:00\u202fPM', 'Tuesday: 12:00\u2009–\u20095:00\u202fPM', 'Wednesday: 12:00\u2009–\u20095:00\u202fPM', 'Thursday: 12:00\u2009–\u20095:00\u202fPM', 'Friday: 12:00\u2009–\u20095:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1700'}, 'open': {'day': 1, 'time': '1200'}}, {'close': {'day': 2, 'time': '1700'}, 'open': {'day': 2, 'time': '1200'}}, {'close': {'day': 3, 'time': '1700'}, 'open': {'day': 3, 'time': '1200'}}, {'close': {'day': 4, 'time': '1700'}, 'open': {'day': 4, 'time': '1200'}}, {'close': {'day': 5, 'time': '1700'}, 'open': {'day': 5, 'time': '1200'}}], 'today_open': '12:00', 'today_close': '17:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Bombinhas - Captação - Prefeitura, Bombinhas, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Bombinhas - Captação - Prefeitura: {'is_open_now': False, 'weekday_text': ['Monday: 12:00\u2009–\u20096:00\u202fPM', 'Tuesday: 12:00\u2009–\u20096:00\u202fPM', 'Wednesday: 12:00\u2009–\u20096:00\u202fPM', 'Thursday: 12:00\u2009–\u20096:00\u202fPM', 'Friday: 12:00\u2009–\u20096:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1800'}, 'open': {'day': 1, 'time': '1200'}}, {'close': {'day': 2, 'time': '1800'}, 'open': {'day': 2, 'time': '1200'}}, {'close': {'day': 3, 'time': '1800'}, 'open': {'day': 3, 'time': '1200'}}, {'close': {'day': 4, 'time': '1800'}, 'open': {'day': 4, 'time': '1200'}}, {'close': {'day': 5, 'time': '1800'}, 'open': {'day': 5, 'time': '1200'}}], 'today_open': '12:00', 'today_close': '18:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:✅ Matriz do Google Maps obtida: 3x3
INFO:gestao_visitas.services.route_optimizer:🕰️ Ajustando visita para abertura: 12:00
INFO:gestao_visitas.services.route_optimizer:✅ Otimização Nível 3 concluída com sucesso
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 21:58:46] "POST /api/otimizar-rotas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:00:35] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:02:34] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:gestao_visitas.services.offline_maps_service:🗺️ Databases de cache offline inicializados
INFO:googlemaps.client:API queries_quota: 60
INFO:gestao_visitas.services.offline_maps_service:🗺️ Google Maps API inicializada para cache offline
INFO:googlemaps.client:API queries_quota: 60
INFO:gestao_visitas.services.route_optimizer:🗺️ Google Maps API inicializada e testada com sucesso
INFO:gestao_visitas.services.route_optimizer:🗺️ Iniciando otimização Nível 3 com 3 pontos
INFO:gestao_visitas.services.route_optimizer:🕰️ Buscando horários de atendimento reais...
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Porto Belo - Prefeitura, Porto Belo, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Porto Belo - Prefeitura: {'is_open_now': False, 'weekday_text': ['Monday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Tuesday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Wednesday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Thursday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Friday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1200'}, 'open': {'day': 1, 'time': '0800'}}, {'close': {'day': 1, 'time': '1700'}, 'open': {'day': 1, 'time': '1300'}}, {'close': {'day': 2, 'time': '1200'}, 'open': {'day': 2, 'time': '0800'}}, {'close': {'day': 2, 'time': '1700'}, 'open': {'day': 2, 'time': '1300'}}, {'close': {'day': 3, 'time': '1200'}, 'open': {'day': 3, 'time': '0800'}}, {'close': {'day': 3, 'time': '1700'}, 'open': {'day': 3, 'time': '1300'}}, {'close': {'day': 4, 'time': '1200'}, 'open': {'day': 4, 'time': '0800'}}, {'close': {'day': 4, 'time': '1700'}, 'open': {'day': 4, 'time': '1300'}}, {'close': {'day': 5, 'time': '1200'}, 'open': {'day': 5, 'time': '0800'}}, {'close': {'day': 5, 'time': '1700'}, 'open': {'day': 5, 'time': '1300'}}], 'today_open': '08:00', 'today_close': '12:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Bombinhas - Prefeitura - Vigilância Sanitária, Bombinhas, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Bombinhas - Prefeitura - Vigilância Sanitária: {'is_open_now': False, 'weekday_text': ['Monday: 12:00\u2009–\u20095:00\u202fPM', 'Tuesday: 12:00\u2009–\u20095:00\u202fPM', 'Wednesday: 12:00\u2009–\u20095:00\u202fPM', 'Thursday: 12:00\u2009–\u20095:00\u202fPM', 'Friday: 12:00\u2009–\u20095:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1700'}, 'open': {'day': 1, 'time': '1200'}}, {'close': {'day': 2, 'time': '1700'}, 'open': {'day': 2, 'time': '1200'}}, {'close': {'day': 3, 'time': '1700'}, 'open': {'day': 3, 'time': '1200'}}, {'close': {'day': 4, 'time': '1700'}, 'open': {'day': 4, 'time': '1200'}}, {'close': {'day': 5, 'time': '1700'}, 'open': {'day': 5, 'time': '1200'}}], 'today_open': '12:00', 'today_close': '17:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Bombinhas - Captação - Prefeitura, Bombinhas, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Bombinhas - Captação - Prefeitura: {'is_open_now': False, 'weekday_text': ['Monday: 12:00\u2009–\u20096:00\u202fPM', 'Tuesday: 12:00\u2009–\u20096:00\u202fPM', 'Wednesday: 12:00\u2009–\u20096:00\u202fPM', 'Thursday: 12:00\u2009–\u20096:00\u202fPM', 'Friday: 12:00\u2009–\u20096:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1800'}, 'open': {'day': 1, 'time': '1200'}}, {'close': {'day': 2, 'time': '1800'}, 'open': {'day': 2, 'time': '1200'}}, {'close': {'day': 3, 'time': '1800'}, 'open': {'day': 3, 'time': '1200'}}, {'close': {'day': 4, 'time': '1800'}, 'open': {'day': 4, 'time': '1200'}}, {'close': {'day': 5, 'time': '1800'}, 'open': {'day': 5, 'time': '1200'}}], 'today_open': '12:00', 'today_close': '18:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:✅ Matriz do Google Maps obtida: 3x3
INFO:gestao_visitas.services.route_optimizer:🕰️ Ajustando visita para abertura: 12:00
INFO:gestao_visitas.services.route_optimizer:✅ Otimização Nível 3 concluída com sucesso
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:03:22] "POST /api/otimizar-rotas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:03:35] "GET /api/visitas/progresso-mapa HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:03:36] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:04:35] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:06:35] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:08:35] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:08:37] "GET /api/visitas/progresso-mapa HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:08:37] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:10:35] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:12:41] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:13:36] "GET /api/visitas/progresso-mapa HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:13:36] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:14:43] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:16:41] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:18:36] "GET /api/visitas/progresso-mapa HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:18:36] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:18:43] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:19:17] "GET /mapa-progresso HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:19:17] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:19:17] "GET /static/js/pwa.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:19:17] "GET /static/js/components.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:19:17] "GET /static/js/breadcrumbs-init.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:19:17] "GET /static/js/health-check.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:19:17] "GET /static/css/design-system.css HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:19:18] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:19:19] "GET /api/visitas/progresso-mapa HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:19:19] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:19:19] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:19:20] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:19:24] "GET /api/google-maps-config HTTP/1.1" 200 -
INFO:gestao_visitas.services.offline_maps_service:🗺️ Databases de cache offline inicializados
INFO:googlemaps.client:API queries_quota: 60
INFO:gestao_visitas.services.offline_maps_service:🗺️ Google Maps API inicializada para cache offline
INFO:googlemaps.client:API queries_quota: 60
INFO:gestao_visitas.services.route_optimizer:🗺️ Google Maps API inicializada e testada com sucesso
INFO:gestao_visitas.services.route_optimizer:🗺️ Iniciando otimização Nível 3 com 3 pontos
INFO:gestao_visitas.services.route_optimizer:🕰️ Buscando horários de atendimento reais...
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Porto Belo - Prefeitura, Porto Belo, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Porto Belo - Prefeitura: {'is_open_now': False, 'weekday_text': ['Monday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Tuesday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Wednesday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Thursday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Friday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1200'}, 'open': {'day': 1, 'time': '0800'}}, {'close': {'day': 1, 'time': '1700'}, 'open': {'day': 1, 'time': '1300'}}, {'close': {'day': 2, 'time': '1200'}, 'open': {'day': 2, 'time': '0800'}}, {'close': {'day': 2, 'time': '1700'}, 'open': {'day': 2, 'time': '1300'}}, {'close': {'day': 3, 'time': '1200'}, 'open': {'day': 3, 'time': '0800'}}, {'close': {'day': 3, 'time': '1700'}, 'open': {'day': 3, 'time': '1300'}}, {'close': {'day': 4, 'time': '1200'}, 'open': {'day': 4, 'time': '0800'}}, {'close': {'day': 4, 'time': '1700'}, 'open': {'day': 4, 'time': '1300'}}, {'close': {'day': 5, 'time': '1200'}, 'open': {'day': 5, 'time': '0800'}}, {'close': {'day': 5, 'time': '1700'}, 'open': {'day': 5, 'time': '1300'}}], 'today_open': '08:00', 'today_close': '12:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Bombinhas - Prefeitura - Vigilância Sanitária, Bombinhas, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Bombinhas - Prefeitura - Vigilância Sanitária: {'is_open_now': False, 'weekday_text': ['Monday: 12:00\u2009–\u20095:00\u202fPM', 'Tuesday: 12:00\u2009–\u20095:00\u202fPM', 'Wednesday: 12:00\u2009–\u20095:00\u202fPM', 'Thursday: 12:00\u2009–\u20095:00\u202fPM', 'Friday: 12:00\u2009–\u20095:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1700'}, 'open': {'day': 1, 'time': '1200'}}, {'close': {'day': 2, 'time': '1700'}, 'open': {'day': 2, 'time': '1200'}}, {'close': {'day': 3, 'time': '1700'}, 'open': {'day': 3, 'time': '1200'}}, {'close': {'day': 4, 'time': '1700'}, 'open': {'day': 4, 'time': '1200'}}, {'close': {'day': 5, 'time': '1700'}, 'open': {'day': 5, 'time': '1200'}}], 'today_open': '12:00', 'today_close': '17:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Bombinhas - Captação - Prefeitura, Bombinhas, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Bombinhas - Captação - Prefeitura: {'is_open_now': False, 'weekday_text': ['Monday: 12:00\u2009–\u20096:00\u202fPM', 'Tuesday: 12:00\u2009–\u20096:00\u202fPM', 'Wednesday: 12:00\u2009–\u20096:00\u202fPM', 'Thursday: 12:00\u2009–\u20096:00\u202fPM', 'Friday: 12:00\u2009–\u20096:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1800'}, 'open': {'day': 1, 'time': '1200'}}, {'close': {'day': 2, 'time': '1800'}, 'open': {'day': 2, 'time': '1200'}}, {'close': {'day': 3, 'time': '1800'}, 'open': {'day': 3, 'time': '1200'}}, {'close': {'day': 4, 'time': '1800'}, 'open': {'day': 4, 'time': '1200'}}, {'close': {'day': 5, 'time': '1800'}, 'open': {'day': 5, 'time': '1200'}}], 'today_open': '12:00', 'today_close': '18:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:✅ Matriz do Google Maps obtida: 3x3
INFO:gestao_visitas.services.route_optimizer:🕰️ Ajustando visita para abertura: 12:00
INFO:gestao_visitas.services.route_optimizer:✅ Otimização Nível 3 concluída com sucesso
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:19:27] "POST /api/otimizar-rotas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:19:30] "GET /api/google-maps-config HTTP/1.1" 200 -
INFO:gestao_visitas.services.offline_maps_service:🗺️ Databases de cache offline inicializados
INFO:googlemaps.client:API queries_quota: 60
INFO:gestao_visitas.services.offline_maps_service:🗺️ Google Maps API inicializada para cache offline
INFO:googlemaps.client:API queries_quota: 60
INFO:gestao_visitas.services.route_optimizer:🗺️ Google Maps API inicializada e testada com sucesso
INFO:gestao_visitas.services.route_optimizer:🗺️ Iniciando otimização Nível 3 com 3 pontos
INFO:gestao_visitas.services.route_optimizer:🕰️ Buscando horários de atendimento reais...
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Porto Belo - Prefeitura, Porto Belo, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Porto Belo - Prefeitura: {'is_open_now': False, 'weekday_text': ['Monday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Tuesday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Wednesday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Thursday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Friday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1200'}, 'open': {'day': 1, 'time': '0800'}}, {'close': {'day': 1, 'time': '1700'}, 'open': {'day': 1, 'time': '1300'}}, {'close': {'day': 2, 'time': '1200'}, 'open': {'day': 2, 'time': '0800'}}, {'close': {'day': 2, 'time': '1700'}, 'open': {'day': 2, 'time': '1300'}}, {'close': {'day': 3, 'time': '1200'}, 'open': {'day': 3, 'time': '0800'}}, {'close': {'day': 3, 'time': '1700'}, 'open': {'day': 3, 'time': '1300'}}, {'close': {'day': 4, 'time': '1200'}, 'open': {'day': 4, 'time': '0800'}}, {'close': {'day': 4, 'time': '1700'}, 'open': {'day': 4, 'time': '1300'}}, {'close': {'day': 5, 'time': '1200'}, 'open': {'day': 5, 'time': '0800'}}, {'close': {'day': 5, 'time': '1700'}, 'open': {'day': 5, 'time': '1300'}}], 'today_open': '08:00', 'today_close': '12:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Bombinhas - Prefeitura - Vigilância Sanitária, Bombinhas, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Bombinhas - Prefeitura - Vigilância Sanitária: {'is_open_now': False, 'weekday_text': ['Monday: 12:00\u2009–\u20095:00\u202fPM', 'Tuesday: 12:00\u2009–\u20095:00\u202fPM', 'Wednesday: 12:00\u2009–\u20095:00\u202fPM', 'Thursday: 12:00\u2009–\u20095:00\u202fPM', 'Friday: 12:00\u2009–\u20095:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1700'}, 'open': {'day': 1, 'time': '1200'}}, {'close': {'day': 2, 'time': '1700'}, 'open': {'day': 2, 'time': '1200'}}, {'close': {'day': 3, 'time': '1700'}, 'open': {'day': 3, 'time': '1200'}}, {'close': {'day': 4, 'time': '1700'}, 'open': {'day': 4, 'time': '1200'}}, {'close': {'day': 5, 'time': '1700'}, 'open': {'day': 5, 'time': '1200'}}], 'today_open': '12:00', 'today_close': '17:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Bombinhas - Captação - Prefeitura, Bombinhas, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Bombinhas - Captação - Prefeitura: {'is_open_now': False, 'weekday_text': ['Monday: 12:00\u2009–\u20096:00\u202fPM', 'Tuesday: 12:00\u2009–\u20096:00\u202fPM', 'Wednesday: 12:00\u2009–\u20096:00\u202fPM', 'Thursday: 12:00\u2009–\u20096:00\u202fPM', 'Friday: 12:00\u2009–\u20096:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1800'}, 'open': {'day': 1, 'time': '1200'}}, {'close': {'day': 2, 'time': '1800'}, 'open': {'day': 2, 'time': '1200'}}, {'close': {'day': 3, 'time': '1800'}, 'open': {'day': 3, 'time': '1200'}}, {'close': {'day': 4, 'time': '1800'}, 'open': {'day': 4, 'time': '1200'}}, {'close': {'day': 5, 'time': '1800'}, 'open': {'day': 5, 'time': '1200'}}], 'today_open': '12:00', 'today_close': '18:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:✅ Matriz do Google Maps obtida: 3x3
INFO:gestao_visitas.services.route_optimizer:🕰️ Ajustando visita para abertura: 12:00
INFO:gestao_visitas.services.route_optimizer:✅ Otimização Nível 3 concluída com sucesso
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:19:32] "POST /api/otimizar-rotas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:21:17] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:23:18] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:24:18] "GET /api/visitas/progresso-mapa HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:24:18] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:25:17] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:26:30] "GET /mapa-progresso HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:26:30] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:26:30] "GET /static/js/health-check.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:26:30] "GET /static/js/components.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:26:30] "GET /static/js/breadcrumbs-init.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:26:30] "GET /static/js/pwa.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:26:30] "GET /static/css/design-system.css HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:26:30] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:26:32] "GET /api/visitas/progresso-mapa HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:26:32] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:26:32] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:26:32] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:26:38] "GET /api/google-maps-config HTTP/1.1" 200 -
INFO:gestao_visitas.services.offline_maps_service:🗺️ Databases de cache offline inicializados
INFO:googlemaps.client:API queries_quota: 60
INFO:gestao_visitas.services.offline_maps_service:🗺️ Google Maps API inicializada para cache offline
INFO:googlemaps.client:API queries_quota: 60
INFO:gestao_visitas.services.route_optimizer:🗺️ Google Maps API inicializada e testada com sucesso
INFO:gestao_visitas.services.route_optimizer:🗺️ Iniciando otimização Nível 3 com 3 pontos
INFO:gestao_visitas.services.route_optimizer:🕰️ Buscando horários de atendimento reais...
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Porto Belo - Prefeitura, Porto Belo, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Porto Belo - Prefeitura: {'is_open_now': False, 'weekday_text': ['Monday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Tuesday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Wednesday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Thursday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Friday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1200'}, 'open': {'day': 1, 'time': '0800'}}, {'close': {'day': 1, 'time': '1700'}, 'open': {'day': 1, 'time': '1300'}}, {'close': {'day': 2, 'time': '1200'}, 'open': {'day': 2, 'time': '0800'}}, {'close': {'day': 2, 'time': '1700'}, 'open': {'day': 2, 'time': '1300'}}, {'close': {'day': 3, 'time': '1200'}, 'open': {'day': 3, 'time': '0800'}}, {'close': {'day': 3, 'time': '1700'}, 'open': {'day': 3, 'time': '1300'}}, {'close': {'day': 4, 'time': '1200'}, 'open': {'day': 4, 'time': '0800'}}, {'close': {'day': 4, 'time': '1700'}, 'open': {'day': 4, 'time': '1300'}}, {'close': {'day': 5, 'time': '1200'}, 'open': {'day': 5, 'time': '0800'}}, {'close': {'day': 5, 'time': '1700'}, 'open': {'day': 5, 'time': '1300'}}], 'today_open': '08:00', 'today_close': '12:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Bombinhas - Prefeitura - Vigilância Sanitária, Bombinhas, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Bombinhas - Prefeitura - Vigilância Sanitária: {'is_open_now': False, 'weekday_text': ['Monday: 12:00\u2009–\u20095:00\u202fPM', 'Tuesday: 12:00\u2009–\u20095:00\u202fPM', 'Wednesday: 12:00\u2009–\u20095:00\u202fPM', 'Thursday: 12:00\u2009–\u20095:00\u202fPM', 'Friday: 12:00\u2009–\u20095:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1700'}, 'open': {'day': 1, 'time': '1200'}}, {'close': {'day': 2, 'time': '1700'}, 'open': {'day': 2, 'time': '1200'}}, {'close': {'day': 3, 'time': '1700'}, 'open': {'day': 3, 'time': '1200'}}, {'close': {'day': 4, 'time': '1700'}, 'open': {'day': 4, 'time': '1200'}}, {'close': {'day': 5, 'time': '1700'}, 'open': {'day': 5, 'time': '1200'}}], 'today_open': '12:00', 'today_close': '17:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Bombinhas - Captação - Prefeitura, Bombinhas, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Bombinhas - Captação - Prefeitura: {'is_open_now': False, 'weekday_text': ['Monday: 12:00\u2009–\u20096:00\u202fPM', 'Tuesday: 12:00\u2009–\u20096:00\u202fPM', 'Wednesday: 12:00\u2009–\u20096:00\u202fPM', 'Thursday: 12:00\u2009–\u20096:00\u202fPM', 'Friday: 12:00\u2009–\u20096:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1800'}, 'open': {'day': 1, 'time': '1200'}}, {'close': {'day': 2, 'time': '1800'}, 'open': {'day': 2, 'time': '1200'}}, {'close': {'day': 3, 'time': '1800'}, 'open': {'day': 3, 'time': '1200'}}, {'close': {'day': 4, 'time': '1800'}, 'open': {'day': 4, 'time': '1200'}}, {'close': {'day': 5, 'time': '1800'}, 'open': {'day': 5, 'time': '1200'}}], 'today_open': '12:00', 'today_close': '18:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:✅ Matriz do Google Maps obtida: 3x3
INFO:gestao_visitas.services.route_optimizer:🕰️ Ajustando visita para abertura: 12:00
INFO:gestao_visitas.services.route_optimizer:✅ Otimização Nível 3 concluída com sucesso
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:26:41] "POST /api/otimizar-rotas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:28:30] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:30:31] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug: * Detected change in '/mnt/c/users/ggmob/Cursor AI/Verificação Informantes PNSB/Agente IA/gestao_visitas/services/route_optimizer.py', reloading
=== INICIANDO APP.PY CORRETO ===
✅ Compressão Flask-Compress ativada
✅ Arquivo .env carregado com sucesso
✅ Serviços PNSB inicializados com sucesso
✅ Google Maps API configurado com sucesso
💾 Backup automático criado: 20250706_215507
🔒 Sistema de backup automático iniciado
   📁 Diretório: gestao_visitas/backups_automaticos
   ⏰ Intervalo: 300 segundos
🔒 Sistema de backup automático ativado - suas visitas estão protegidas!
💰 Chat IA desabilitado para economizar custos. Defina CHAT_IA_HABILITADO=true para habilitar.
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
🔧 Iniciando otimização para 2 visitas
✅ RouteOptimizer inicializado. Google Maps disponível: True
📍 Pontos convertidos: 2
   1. Itajaí - Itajaí - Prefeitura Itajaí
   2. Balneário Camboriú - Balneário Camboriú - Prefeitura Balneário Camboriú
🚀 Iniciando otimização com Google Maps...
DEBUG: distance_matrix['distances'] é tipo: <class 'list'>
DEBUG: Matrix é 2x2
DEBUG: ✅ Usando distância real entre pontos: 11.12km
DEBUG: ✅ Usando APENAS distância real da Google Maps: 11.12km
✅ Resultado da otimização: sucesso=True
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
🔧 Iniciando otimização para 3 visitas
✅ RouteOptimizer inicializado. Google Maps disponível: True
📍 Pontos convertidos: 3
   1. Porto Belo - Porto Belo - Prefeitura
   2. Bombinhas - Bombinhas - Prefeitura - Vigilância Sanitária
   3. Bombinhas - Bombinhas - Captação - Prefeitura
🚀 Iniciando otimização com Google Maps...
DEBUG: distance_matrix['distances'] é tipo: <class 'list'>
DEBUG: Matrix é 3x3
DEBUG: Somando distância[1][0]: 8.60km
DEBUG: ✅ Usando APENAS distância real da Google Maps: 8.60km
✅ Resultado da otimização: sucesso=True
💾 Backup automático criado: 20250706_220019
🔧 Iniciando otimização para 3 visitas
✅ RouteOptimizer inicializado. Google Maps disponível: True
📍 Pontos convertidos: 3
   1. Porto Belo - Porto Belo - Prefeitura
   2. Bombinhas - Bombinhas - Prefeitura - Vigilância Sanitária
   3. Bombinhas - Bombinhas - Captação - Prefeitura
🚀 Iniciando otimização com Google Maps...
DEBUG: distance_matrix['distances'] é tipo: <class 'list'>
DEBUG: Matrix é 3x3
DEBUG: Somando distância[1][0]: 8.60km
DEBUG: ✅ Usando APENAS distância real da Google Maps: 8.60km
✅ Resultado da otimização: sucesso=True
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
💾 Backup automático criado: 20250706_220531
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
💾 Backup automático criado: 20250706_221045
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
💾 Backup automático criado: 20250706_221600
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
🔧 Iniciando otimização para 3 visitas
✅ RouteOptimizer inicializado. Google Maps disponível: True
📍 Pontos convertidos: 3
   1. Porto Belo - Porto Belo - Prefeitura
   2. Bombinhas - Bombinhas - Prefeitura - Vigilância Sanitária
   3. Bombinhas - Bombinhas - Captação - Prefeitura
🚀 Iniciando otimização com Google Maps...
DEBUG: distance_matrix['distances'] é tipo: <class 'list'>
DEBUG: Matrix é 3x3
DEBUG: Somando distância[1][0]: 8.60km
DEBUG: ✅ Usando APENAS distância real da Google Maps: 8.60km
✅ Resultado da otimização: sucesso=True
🔧 Iniciando otimização para 3 visitas
✅ RouteOptimizer inicializado. Google Maps disponível: True
📍 Pontos convertidos: 3
   1. Porto Belo - Porto Belo - Prefeitura
   2. Bombinhas - Bombinhas - Prefeitura - Vigilância Sanitária
   3. Bombinhas - Bombinhas - Captação - Prefeitura
🚀 Iniciando otimização com Google Maps...
DEBUG: distance_matrix['distances'] é tipo: <class 'list'>
DEBUG: Matrix é 3x3
DEBUG: Somando distância[1][0]: 8.60km
DEBUG: ✅ Usando APENAS distância real da Google Maps: 8.60km
✅ Resultado da otimização: sucesso=True
💾 Backup automático criado: 20250706_222115
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
💾 Backup automático criado: 20250706_222630
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
🔧 Iniciando otimização para 3 visitas
✅ RouteOptimizer inicializado. Google Maps disponível: True
📍 Pontos convertidos: 3
   1. Porto Belo - Porto Belo - Prefeitura
   2. Bombinhas - Bombinhas - Prefeitura - Vigilância Sanitária
   3. Bombinhas - Bombinhas - Captação - Prefeitura
🚀 Iniciando otimização com Google Maps...
DEBUG: distance_matrix['distances'] é tipo: <class 'list'>
DEBUG: Matrix é 3x3
DEBUG: Somando distância[1][0]: 8.60km
DEBUG: ✅ Usando APENAS distância real da Google Maps: 8.60km
✅ Resultado da otimização: sucesso=True
🛑 Sistema de backup automático parado
INFO:werkzeug: * Restarting with stat
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
⚠️ Google Maps API não disponível: geocode() got an unexpected keyword argument 'timeout'
INFO:gestao_visitas.services.redis_cache:🎭 Redis não disponível (Error 111 connecting to localhost:6379. Connection...), usando simulador automático
INFO:gestao_visitas.services.redis_simulator:🚀 Redis Simulator iniciado com sucesso
INFO:gestao_visitas.services.redis_simulator:🔌 Redis Simulator Client conectado (simulando localhost:6379/db0)
INFO:gestao_visitas.services.redis_simulator:🎭 Usando Redis Simulator em vez de redis://localhost:6379/0
INFO:gestao_visitas.services.redis_simulator:🚀 Redis Simulator iniciado com sucesso
INFO:gestao_visitas.services.redis_simulator:🔌 Redis Simulator Client conectado (simulando localhost:6379/db0)
INFO:gestao_visitas.services.redis_cache:🚀 Redis Simulator ativado com sucesso - performance total!
INFO:googlemaps.client:API queries_quota: 60
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 216-667-060
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:31:35] "GET /api/visitas/progresso-mapa HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:31:35] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:32:31] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:34:30] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:36:07] "GET /mapa-progresso HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:36:08] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:36:08] "GET /static/js/components.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:36:08] "GET /static/js/pwa.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:36:08] "GET /static/js/breadcrumbs-init.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:36:08] "GET /static/js/health-check.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:36:08] "GET /static/css/design-system.css HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:36:08] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:36:11] "GET /api/visitas/progresso-mapa HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:36:11] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:36:11] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:36:11] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:36:15] "GET /api/google-maps-config HTTP/1.1" 200 -
INFO:gestao_visitas.services.offline_maps_service:🗺️ Databases de cache offline inicializados
INFO:googlemaps.client:API queries_quota: 60
INFO:gestao_visitas.services.offline_maps_service:🗺️ Google Maps API inicializada para cache offline
INFO:googlemaps.client:API queries_quota: 60
INFO:gestao_visitas.services.route_optimizer:🗺️ Google Maps API inicializada e testada com sucesso
INFO:gestao_visitas.services.route_optimizer:🗺️ Iniciando otimização Nível 3 com 3 pontos
INFO:gestao_visitas.services.route_optimizer:🕰️ Buscando horários de atendimento reais...
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Porto Belo - Prefeitura, Porto Belo, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Porto Belo - Prefeitura: {'is_open_now': False, 'weekday_text': ['Monday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Tuesday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Wednesday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Thursday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Friday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1200'}, 'open': {'day': 1, 'time': '0800'}}, {'close': {'day': 1, 'time': '1700'}, 'open': {'day': 1, 'time': '1300'}}, {'close': {'day': 2, 'time': '1200'}, 'open': {'day': 2, 'time': '0800'}}, {'close': {'day': 2, 'time': '1700'}, 'open': {'day': 2, 'time': '1300'}}, {'close': {'day': 3, 'time': '1200'}, 'open': {'day': 3, 'time': '0800'}}, {'close': {'day': 3, 'time': '1700'}, 'open': {'day': 3, 'time': '1300'}}, {'close': {'day': 4, 'time': '1200'}, 'open': {'day': 4, 'time': '0800'}}, {'close': {'day': 4, 'time': '1700'}, 'open': {'day': 4, 'time': '1300'}}, {'close': {'day': 5, 'time': '1200'}, 'open': {'day': 5, 'time': '0800'}}, {'close': {'day': 5, 'time': '1700'}, 'open': {'day': 5, 'time': '1300'}}], 'today_open': '08:00', 'today_close': '12:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Bombinhas - Prefeitura - Vigilância Sanitária, Bombinhas, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Bombinhas - Prefeitura - Vigilância Sanitária: {'is_open_now': False, 'weekday_text': ['Monday: 12:00\u2009–\u20095:00\u202fPM', 'Tuesday: 12:00\u2009–\u20095:00\u202fPM', 'Wednesday: 12:00\u2009–\u20095:00\u202fPM', 'Thursday: 12:00\u2009–\u20095:00\u202fPM', 'Friday: 12:00\u2009–\u20095:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1700'}, 'open': {'day': 1, 'time': '1200'}}, {'close': {'day': 2, 'time': '1700'}, 'open': {'day': 2, 'time': '1200'}}, {'close': {'day': 3, 'time': '1700'}, 'open': {'day': 3, 'time': '1200'}}, {'close': {'day': 4, 'time': '1700'}, 'open': {'day': 4, 'time': '1200'}}, {'close': {'day': 5, 'time': '1700'}, 'open': {'day': 5, 'time': '1200'}}], 'today_open': '12:00', 'today_close': '17:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Bombinhas - Captação - Prefeitura, Bombinhas, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Bombinhas - Captação - Prefeitura: {'is_open_now': False, 'weekday_text': ['Monday: 12:00\u2009–\u20096:00\u202fPM', 'Tuesday: 12:00\u2009–\u20096:00\u202fPM', 'Wednesday: 12:00\u2009–\u20096:00\u202fPM', 'Thursday: 12:00\u2009–\u20096:00\u202fPM', 'Friday: 12:00\u2009–\u20096:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1800'}, 'open': {'day': 1, 'time': '1200'}}, {'close': {'day': 2, 'time': '1800'}, 'open': {'day': 2, 'time': '1200'}}, {'close': {'day': 3, 'time': '1800'}, 'open': {'day': 3, 'time': '1200'}}, {'close': {'day': 4, 'time': '1800'}, 'open': {'day': 4, 'time': '1200'}}, {'close': {'day': 5, 'time': '1800'}, 'open': {'day': 5, 'time': '1200'}}], 'today_open': '12:00', 'today_close': '18:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:✅ Matriz do Google Maps obtida: 3x3
INFO:gestao_visitas.services.route_optimizer:🕰️ Ajustando visita para abertura: 12:00
INFO:gestao_visitas.services.route_optimizer:✅ Otimização Nível 3 concluída com sucesso
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:36:19] "POST /api/otimizar-rotas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:38:09] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:39:56] "GET /mapa-progresso HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:39:56] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:39:56] "GET /static/js/components.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:39:56] "GET /static/js/pwa.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:39:56] "GET /static/js/health-check.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:39:56] "GET /static/js/breadcrumbs-init.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:39:56] "GET /static/css/design-system.css HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:39:57] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:39:58] "GET /api/visitas/progresso-mapa HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:39:58] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:39:58] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:39:59] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:41:47] "GET /mapa-progresso HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:41:47] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:41:47] "GET /static/js/pwa.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:41:47] "GET /static/js/health-check.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:41:47] "GET /static/js/components.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:41:47] "GET /static/js/breadcrumbs-init.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:41:47] "GET /static/css/design-system.css HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:41:47] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:41:47] "GET /mapa-progresso HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:41:47] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:41:47] "GET /static/js/pwa.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:41:47] "GET /static/js/health-check.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:41:47] "GET /static/js/components.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:41:47] "GET /static/js/breadcrumbs-init.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:41:47] "GET /static/css/design-system.css HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:41:48] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:41:48] "GET /api/visitas/progresso-mapa HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:41:48] "GET /api/visitas/progresso-mapa HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:41:48] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:41:48] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:41:50] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:41:59] "GET /api/google-maps-config HTTP/1.1" 200 -
INFO:gestao_visitas.services.offline_maps_service:🗺️ Databases de cache offline inicializados
INFO:googlemaps.client:API queries_quota: 60
INFO:gestao_visitas.services.offline_maps_service:🗺️ Google Maps API inicializada para cache offline
INFO:googlemaps.client:API queries_quota: 60
INFO:gestao_visitas.services.route_optimizer:🗺️ Google Maps API inicializada e testada com sucesso
INFO:gestao_visitas.services.route_optimizer:🗺️ Iniciando otimização Nível 3 com 3 pontos
INFO:gestao_visitas.services.route_optimizer:🕰️ Buscando horários de atendimento reais...
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Porto Belo - Prefeitura, Porto Belo, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Porto Belo - Prefeitura: {'is_open_now': False, 'weekday_text': ['Monday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Tuesday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Wednesday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Thursday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Friday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1200'}, 'open': {'day': 1, 'time': '0800'}}, {'close': {'day': 1, 'time': '1700'}, 'open': {'day': 1, 'time': '1300'}}, {'close': {'day': 2, 'time': '1200'}, 'open': {'day': 2, 'time': '0800'}}, {'close': {'day': 2, 'time': '1700'}, 'open': {'day': 2, 'time': '1300'}}, {'close': {'day': 3, 'time': '1200'}, 'open': {'day': 3, 'time': '0800'}}, {'close': {'day': 3, 'time': '1700'}, 'open': {'day': 3, 'time': '1300'}}, {'close': {'day': 4, 'time': '1200'}, 'open': {'day': 4, 'time': '0800'}}, {'close': {'day': 4, 'time': '1700'}, 'open': {'day': 4, 'time': '1300'}}, {'close': {'day': 5, 'time': '1200'}, 'open': {'day': 5, 'time': '0800'}}, {'close': {'day': 5, 'time': '1700'}, 'open': {'day': 5, 'time': '1300'}}], 'today_open': '08:00', 'today_close': '12:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Bombinhas - Prefeitura - Vigilância Sanitária, Bombinhas, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Bombinhas - Prefeitura - Vigilância Sanitária: {'is_open_now': False, 'weekday_text': ['Monday: 12:00\u2009–\u20095:00\u202fPM', 'Tuesday: 12:00\u2009–\u20095:00\u202fPM', 'Wednesday: 12:00\u2009–\u20095:00\u202fPM', 'Thursday: 12:00\u2009–\u20095:00\u202fPM', 'Friday: 12:00\u2009–\u20095:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1700'}, 'open': {'day': 1, 'time': '1200'}}, {'close': {'day': 2, 'time': '1700'}, 'open': {'day': 2, 'time': '1200'}}, {'close': {'day': 3, 'time': '1700'}, 'open': {'day': 3, 'time': '1200'}}, {'close': {'day': 4, 'time': '1700'}, 'open': {'day': 4, 'time': '1200'}}, {'close': {'day': 5, 'time': '1700'}, 'open': {'day': 5, 'time': '1200'}}], 'today_open': '12:00', 'today_close': '17:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Bombinhas - Captação - Prefeitura, Bombinhas, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Bombinhas - Captação - Prefeitura: {'is_open_now': False, 'weekday_text': ['Monday: 12:00\u2009–\u20096:00\u202fPM', 'Tuesday: 12:00\u2009–\u20096:00\u202fPM', 'Wednesday: 12:00\u2009–\u20096:00\u202fPM', 'Thursday: 12:00\u2009–\u20096:00\u202fPM', 'Friday: 12:00\u2009–\u20096:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1800'}, 'open': {'day': 1, 'time': '1200'}}, {'close': {'day': 2, 'time': '1800'}, 'open': {'day': 2, 'time': '1200'}}, {'close': {'day': 3, 'time': '1800'}, 'open': {'day': 3, 'time': '1200'}}, {'close': {'day': 4, 'time': '1800'}, 'open': {'day': 4, 'time': '1200'}}, {'close': {'day': 5, 'time': '1800'}, 'open': {'day': 5, 'time': '1200'}}], 'today_open': '12:00', 'today_close': '18:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:✅ Matriz do Google Maps obtida: 3x3
INFO:gestao_visitas.services.route_optimizer:🕰️ Ajustando visita para abertura: 12:00
INFO:gestao_visitas.services.route_optimizer:✅ Otimização Nível 3 concluída com sucesso
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:42:02] "POST /api/otimizar-rotas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:43:54] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:45:47] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:46:25] "GET /mapa-progresso HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:46:25] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:46:25] "GET /static/js/components.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:46:25] "GET /static/js/pwa.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:46:25] "GET /static/js/health-check.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:46:25] "GET /static/js/breadcrumbs-init.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:46:25] "GET /static/css/design-system.css HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:46:25] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:46:26] "GET /mapa-progresso HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:46:26] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:46:26] "GET /static/js/pwa.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:46:26] "GET /static/js/components.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:46:26] "GET /static/js/health-check.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:46:26] "GET /static/js/breadcrumbs-init.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:46:26] "GET /static/css/design-system.css HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:46:26] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:46:26] "GET /api/visitas/progresso-mapa HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:46:27] "GET /api/visitas/progresso-mapa HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:46:27] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:46:27] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:46:28] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:46:38] "GET /api/google-maps-config HTTP/1.1" 200 -
INFO:gestao_visitas.services.offline_maps_service:🗺️ Databases de cache offline inicializados
INFO:googlemaps.client:API queries_quota: 60
INFO:gestao_visitas.services.offline_maps_service:🗺️ Google Maps API inicializada para cache offline
INFO:googlemaps.client:API queries_quota: 60
INFO:gestao_visitas.services.route_optimizer:🗺️ Google Maps API inicializada e testada com sucesso
INFO:gestao_visitas.services.route_optimizer:🗺️ Iniciando otimização Nível 3 com 3 pontos
INFO:gestao_visitas.services.route_optimizer:🕰️ Buscando horários de atendimento reais...
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Porto Belo - Prefeitura, Porto Belo, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Porto Belo - Prefeitura: {'is_open_now': False, 'weekday_text': ['Monday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Tuesday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Wednesday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Thursday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Friday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1200'}, 'open': {'day': 1, 'time': '0800'}}, {'close': {'day': 1, 'time': '1700'}, 'open': {'day': 1, 'time': '1300'}}, {'close': {'day': 2, 'time': '1200'}, 'open': {'day': 2, 'time': '0800'}}, {'close': {'day': 2, 'time': '1700'}, 'open': {'day': 2, 'time': '1300'}}, {'close': {'day': 3, 'time': '1200'}, 'open': {'day': 3, 'time': '0800'}}, {'close': {'day': 3, 'time': '1700'}, 'open': {'day': 3, 'time': '1300'}}, {'close': {'day': 4, 'time': '1200'}, 'open': {'day': 4, 'time': '0800'}}, {'close': {'day': 4, 'time': '1700'}, 'open': {'day': 4, 'time': '1300'}}, {'close': {'day': 5, 'time': '1200'}, 'open': {'day': 5, 'time': '0800'}}, {'close': {'day': 5, 'time': '1700'}, 'open': {'day': 5, 'time': '1300'}}], 'today_open': '08:00', 'today_close': '12:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Bombinhas - Prefeitura - Vigilância Sanitária, Bombinhas, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Bombinhas - Prefeitura - Vigilância Sanitária: {'is_open_now': False, 'weekday_text': ['Monday: 12:00\u2009–\u20095:00\u202fPM', 'Tuesday: 12:00\u2009–\u20095:00\u202fPM', 'Wednesday: 12:00\u2009–\u20095:00\u202fPM', 'Thursday: 12:00\u2009–\u20095:00\u202fPM', 'Friday: 12:00\u2009–\u20095:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1700'}, 'open': {'day': 1, 'time': '1200'}}, {'close': {'day': 2, 'time': '1700'}, 'open': {'day': 2, 'time': '1200'}}, {'close': {'day': 3, 'time': '1700'}, 'open': {'day': 3, 'time': '1200'}}, {'close': {'day': 4, 'time': '1700'}, 'open': {'day': 4, 'time': '1200'}}, {'close': {'day': 5, 'time': '1700'}, 'open': {'day': 5, 'time': '1200'}}], 'today_open': '12:00', 'today_close': '17:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Bombinhas - Captação - Prefeitura, Bombinhas, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Bombinhas - Captação - Prefeitura: {'is_open_now': False, 'weekday_text': ['Monday: 12:00\u2009–\u20096:00\u202fPM', 'Tuesday: 12:00\u2009–\u20096:00\u202fPM', 'Wednesday: 12:00\u2009–\u20096:00\u202fPM', 'Thursday: 12:00\u2009–\u20096:00\u202fPM', 'Friday: 12:00\u2009–\u20096:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1800'}, 'open': {'day': 1, 'time': '1200'}}, {'close': {'day': 2, 'time': '1800'}, 'open': {'day': 2, 'time': '1200'}}, {'close': {'day': 3, 'time': '1800'}, 'open': {'day': 3, 'time': '1200'}}, {'close': {'day': 4, 'time': '1800'}, 'open': {'day': 4, 'time': '1200'}}, {'close': {'day': 5, 'time': '1800'}, 'open': {'day': 5, 'time': '1200'}}], 'today_open': '12:00', 'today_close': '18:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:✅ Matriz do Google Maps obtida: 3x3
INFO:gestao_visitas.services.route_optimizer:🕰️ Ajustando visita para abertura: 12:00
INFO:gestao_visitas.services.route_optimizer:✅ Otimização Nível 3 concluída com sucesso
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:46:41] "POST /api/otimizar-rotas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:47:28] "GET /mapa-progresso HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:47:29] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:47:29] "GET /static/js/pwa.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:47:29] "GET /static/js/health-check.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:47:29] "GET /static/js/components.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:47:29] "GET /static/js/breadcrumbs-init.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:47:29] "GET /static/css/design-system.css HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:47:29] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:47:29] "GET /mapa-progresso HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:47:30] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:47:30] "GET /static/js/pwa.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:47:30] "GET /static/js/health-check.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:47:30] "GET /static/js/components.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:47:30] "GET /static/js/breadcrumbs-init.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:47:30] "GET /static/css/design-system.css HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:47:30] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:47:30] "GET /api/visitas/progresso-mapa HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:47:31] "GET /api/visitas/progresso-mapa HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:47:31] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:47:31] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:47:32] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:47:37] "GET /api/google-maps-config HTTP/1.1" 200 -
INFO:gestao_visitas.services.offline_maps_service:🗺️ Databases de cache offline inicializados
INFO:googlemaps.client:API queries_quota: 60
INFO:gestao_visitas.services.offline_maps_service:🗺️ Google Maps API inicializada para cache offline
INFO:googlemaps.client:API queries_quota: 60
INFO:gestao_visitas.services.route_optimizer:🗺️ Google Maps API inicializada e testada com sucesso
INFO:gestao_visitas.services.route_optimizer:🗺️ Iniciando otimização Nível 3 com 3 pontos
INFO:gestao_visitas.services.route_optimizer:🕰️ Buscando horários de atendimento reais...
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Porto Belo - Prefeitura, Porto Belo, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Porto Belo - Prefeitura: {'is_open_now': False, 'weekday_text': ['Monday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Tuesday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Wednesday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Thursday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Friday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1200'}, 'open': {'day': 1, 'time': '0800'}}, {'close': {'day': 1, 'time': '1700'}, 'open': {'day': 1, 'time': '1300'}}, {'close': {'day': 2, 'time': '1200'}, 'open': {'day': 2, 'time': '0800'}}, {'close': {'day': 2, 'time': '1700'}, 'open': {'day': 2, 'time': '1300'}}, {'close': {'day': 3, 'time': '1200'}, 'open': {'day': 3, 'time': '0800'}}, {'close': {'day': 3, 'time': '1700'}, 'open': {'day': 3, 'time': '1300'}}, {'close': {'day': 4, 'time': '1200'}, 'open': {'day': 4, 'time': '0800'}}, {'close': {'day': 4, 'time': '1700'}, 'open': {'day': 4, 'time': '1300'}}, {'close': {'day': 5, 'time': '1200'}, 'open': {'day': 5, 'time': '0800'}}, {'close': {'day': 5, 'time': '1700'}, 'open': {'day': 5, 'time': '1300'}}], 'today_open': '08:00', 'today_close': '12:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Bombinhas - Prefeitura - Vigilância Sanitária, Bombinhas, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Bombinhas - Prefeitura - Vigilância Sanitária: {'is_open_now': False, 'weekday_text': ['Monday: 12:00\u2009–\u20095:00\u202fPM', 'Tuesday: 12:00\u2009–\u20095:00\u202fPM', 'Wednesday: 12:00\u2009–\u20095:00\u202fPM', 'Thursday: 12:00\u2009–\u20095:00\u202fPM', 'Friday: 12:00\u2009–\u20095:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1700'}, 'open': {'day': 1, 'time': '1200'}}, {'close': {'day': 2, 'time': '1700'}, 'open': {'day': 2, 'time': '1200'}}, {'close': {'day': 3, 'time': '1700'}, 'open': {'day': 3, 'time': '1200'}}, {'close': {'day': 4, 'time': '1700'}, 'open': {'day': 4, 'time': '1200'}}, {'close': {'day': 5, 'time': '1700'}, 'open': {'day': 5, 'time': '1200'}}], 'today_open': '12:00', 'today_close': '17:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Bombinhas - Captação - Prefeitura, Bombinhas, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Bombinhas - Captação - Prefeitura: {'is_open_now': False, 'weekday_text': ['Monday: 12:00\u2009–\u20096:00\u202fPM', 'Tuesday: 12:00\u2009–\u20096:00\u202fPM', 'Wednesday: 12:00\u2009–\u20096:00\u202fPM', 'Thursday: 12:00\u2009–\u20096:00\u202fPM', 'Friday: 12:00\u2009–\u20096:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1800'}, 'open': {'day': 1, 'time': '1200'}}, {'close': {'day': 2, 'time': '1800'}, 'open': {'day': 2, 'time': '1200'}}, {'close': {'day': 3, 'time': '1800'}, 'open': {'day': 3, 'time': '1200'}}, {'close': {'day': 4, 'time': '1800'}, 'open': {'day': 4, 'time': '1200'}}, {'close': {'day': 5, 'time': '1800'}, 'open': {'day': 5, 'time': '1200'}}], 'today_open': '12:00', 'today_close': '18:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:✅ Matriz do Google Maps obtida: 3x3
INFO:gestao_visitas.services.route_optimizer:🕰️ Ajustando visita para abertura: 12:00
INFO:gestao_visitas.services.route_optimizer:✅ Otimização Nível 3 concluída com sucesso
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:47:39] "POST /api/otimizar-rotas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:49:29] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:51:30] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:52:32] "GET /api/visitas/progresso-mapa HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:52:32] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:53:29] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:55:29] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:57:30] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:57:32] "GET /api/visitas/progresso-mapa HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:57:32] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:58:01] "GET /mapa-progresso HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:58:01] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:58:01] "GET /static/js/pwa.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:58:01] "GET /static/js/components.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:58:01] "GET /static/js/breadcrumbs-init.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:58:01] "GET /static/js/health-check.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:58:01] "GET /static/css/design-system.css HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:58:03] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:58:03] "GET /mapa-progresso HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:58:03] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:58:03] "GET /static/js/pwa.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:58:03] "GET /static/js/health-check.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:58:03] "GET /static/js/components.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:58:03] "GET /static/js/breadcrumbs-init.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:58:03] "GET /static/css/design-system.css HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:58:03] "GET /mapa-progresso HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:58:03] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:58:03] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:58:03] "GET /static/js/pwa.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:58:03] "GET /static/js/health-check.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:58:03] "GET /static/js/components.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:58:03] "GET /static/js/breadcrumbs-init.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:58:03] "GET /static/css/design-system.css HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:58:03] "GET /static/icons/icon-base.svg HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:58:04] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:58:04] "GET /api/visitas/progresso-mapa HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:58:04] "GET /api/visitas/progresso-mapa HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:58:05] "GET /api/visitas/progresso-mapa HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:58:05] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:58:05] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:58:06] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:58:10] "GET /api/google-maps-config HTTP/1.1" 200 -
INFO:gestao_visitas.services.offline_maps_service:🗺️ Databases de cache offline inicializados
INFO:googlemaps.client:API queries_quota: 60
INFO:gestao_visitas.services.offline_maps_service:🗺️ Google Maps API inicializada para cache offline
INFO:googlemaps.client:API queries_quota: 60
INFO:gestao_visitas.services.route_optimizer:🗺️ Google Maps API inicializada e testada com sucesso
INFO:gestao_visitas.services.route_optimizer:🗺️ Iniciando otimização Nível 3 com 3 pontos
INFO:gestao_visitas.services.route_optimizer:🕰️ Buscando horários de atendimento reais...
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Porto Belo - Prefeitura, Porto Belo, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Porto Belo - Prefeitura: {'is_open_now': False, 'weekday_text': ['Monday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Tuesday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Wednesday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Thursday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Friday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1200'}, 'open': {'day': 1, 'time': '0800'}}, {'close': {'day': 1, 'time': '1700'}, 'open': {'day': 1, 'time': '1300'}}, {'close': {'day': 2, 'time': '1200'}, 'open': {'day': 2, 'time': '0800'}}, {'close': {'day': 2, 'time': '1700'}, 'open': {'day': 2, 'time': '1300'}}, {'close': {'day': 3, 'time': '1200'}, 'open': {'day': 3, 'time': '0800'}}, {'close': {'day': 3, 'time': '1700'}, 'open': {'day': 3, 'time': '1300'}}, {'close': {'day': 4, 'time': '1200'}, 'open': {'day': 4, 'time': '0800'}}, {'close': {'day': 4, 'time': '1700'}, 'open': {'day': 4, 'time': '1300'}}, {'close': {'day': 5, 'time': '1200'}, 'open': {'day': 5, 'time': '0800'}}, {'close': {'day': 5, 'time': '1700'}, 'open': {'day': 5, 'time': '1300'}}], 'today_open': '08:00', 'today_close': '12:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Bombinhas - Prefeitura - Vigilância Sanitária, Bombinhas, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Bombinhas - Prefeitura - Vigilância Sanitária: {'is_open_now': False, 'weekday_text': ['Monday: 12:00\u2009–\u20095:00\u202fPM', 'Tuesday: 12:00\u2009–\u20095:00\u202fPM', 'Wednesday: 12:00\u2009–\u20095:00\u202fPM', 'Thursday: 12:00\u2009–\u20095:00\u202fPM', 'Friday: 12:00\u2009–\u20095:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1700'}, 'open': {'day': 1, 'time': '1200'}}, {'close': {'day': 2, 'time': '1700'}, 'open': {'day': 2, 'time': '1200'}}, {'close': {'day': 3, 'time': '1700'}, 'open': {'day': 3, 'time': '1200'}}, {'close': {'day': 4, 'time': '1700'}, 'open': {'day': 4, 'time': '1200'}}, {'close': {'day': 5, 'time': '1700'}, 'open': {'day': 5, 'time': '1200'}}], 'today_open': '12:00', 'today_close': '17:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Bombinhas - Captação - Prefeitura, Bombinhas, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Bombinhas - Captação - Prefeitura: {'is_open_now': False, 'weekday_text': ['Monday: 12:00\u2009–\u20096:00\u202fPM', 'Tuesday: 12:00\u2009–\u20096:00\u202fPM', 'Wednesday: 12:00\u2009–\u20096:00\u202fPM', 'Thursday: 12:00\u2009–\u20096:00\u202fPM', 'Friday: 12:00\u2009–\u20096:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1800'}, 'open': {'day': 1, 'time': '1200'}}, {'close': {'day': 2, 'time': '1800'}, 'open': {'day': 2, 'time': '1200'}}, {'close': {'day': 3, 'time': '1800'}, 'open': {'day': 3, 'time': '1200'}}, {'close': {'day': 4, 'time': '1800'}, 'open': {'day': 4, 'time': '1200'}}, {'close': {'day': 5, 'time': '1800'}, 'open': {'day': 5, 'time': '1200'}}], 'today_open': '12:00', 'today_close': '18:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:✅ Matriz do Google Maps obtida: 3x3
INFO:gestao_visitas.services.route_optimizer:🕰️ Ajustando visita para abertura: 12:00
INFO:gestao_visitas.services.route_optimizer:✅ Otimização Nível 3 concluída com sucesso
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 22:58:13] "POST /api/otimizar-rotas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:00:03] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:02:03] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:03:03] "GET /api/visitas/progresso-mapa HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:03:03] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:04:03] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug: * Detected change in '/mnt/c/users/ggmob/Cursor AI/Verificação Informantes PNSB/Agente IA/gestao_visitas/services/route_optimizer.py', reloading
=== INICIANDO APP.PY CORRETO ===
✅ Compressão Flask-Compress ativada
✅ Arquivo .env carregado com sucesso
✅ Serviços PNSB inicializados com sucesso
✅ Google Maps API configurado com sucesso
💾 Backup automático criado: 20250706_223131
🔒 Sistema de backup automático iniciado
   📁 Diretório: gestao_visitas/backups_automaticos
   ⏰ Intervalo: 300 segundos
🔒 Sistema de backup automático ativado - suas visitas estão protegidas!
💰 Chat IA desabilitado para economizar custos. Defina CHAT_IA_HABILITADO=true para habilitar.
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
🔧 Iniciando otimização para 3 visitas
✅ RouteOptimizer inicializado. Google Maps disponível: True
📍 Pontos convertidos: 3
   1. Porto Belo - Porto Belo - Prefeitura
   2. Bombinhas - Bombinhas - Prefeitura - Vigilância Sanitária
   3. Bombinhas - Bombinhas - Captação - Prefeitura
🚀 Iniciando otimização com Google Maps...
DEBUG: distance_matrix['distances'] é tipo: <class 'list'>
DEBUG: Matrix é 3x3
DEBUG: Somando distância[1][0]: 8.60km
DEBUG: ✅ Usando APENAS distância real da Google Maps: 8.60km
✅ Resultado da otimização: sucesso=True
💾 Backup automático criado: 20250706_223645
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
💾 Backup automático criado: 20250706_224156
🔧 Iniciando otimização para 3 visitas
✅ RouteOptimizer inicializado. Google Maps disponível: True
📍 Pontos convertidos: 3
   1. Porto Belo - Porto Belo - Prefeitura
   2. Bombinhas - Bombinhas - Prefeitura - Vigilância Sanitária
   3. Bombinhas - Bombinhas - Captação - Prefeitura
🚀 Iniciando otimização com Google Maps...
DEBUG: distance_matrix['distances'] é tipo: <class 'list'>
DEBUG: Matrix é 3x3
DEBUG: Somando distância[1][0]: 8.60km
DEBUG: ✅ Usando APENAS distância real da Google Maps: 8.60km
✅ Resultado da otimização: sucesso=True
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
🔧 Iniciando otimização para 3 visitas
✅ RouteOptimizer inicializado. Google Maps disponível: True
📍 Pontos convertidos: 3
   1. Porto Belo - Porto Belo - Prefeitura
   2. Bombinhas - Bombinhas - Prefeitura - Vigilância Sanitária
   3. Bombinhas - Bombinhas - Captação - Prefeitura
🚀 Iniciando otimização com Google Maps...
DEBUG: distance_matrix['distances'] é tipo: <class 'list'>
DEBUG: Matrix é 3x3
DEBUG: Somando distância[1][0]: 8.60km
DEBUG: ✅ Usando APENAS distância real da Google Maps: 8.60km
✅ Resultado da otimização: sucesso=True
💾 Backup automático criado: 20250706_224707
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
🔧 Iniciando otimização para 3 visitas
✅ RouteOptimizer inicializado. Google Maps disponível: True
📍 Pontos convertidos: 3
   1. Porto Belo - Porto Belo - Prefeitura
   2. Bombinhas - Bombinhas - Prefeitura - Vigilância Sanitária
   3. Bombinhas - Bombinhas - Captação - Prefeitura
🚀 Iniciando otimização com Google Maps...
DEBUG: distance_matrix['distances'] é tipo: <class 'list'>
DEBUG: Matrix é 3x3
DEBUG: Somando distância[1][0]: 8.60km
DEBUG: ✅ Usando APENAS distância real da Google Maps: 8.60km
✅ Resultado da otimização: sucesso=True
💾 Backup automático criado: 20250706_225221
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
💾 Backup automático criado: 20250706_225737
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
🔧 Iniciando otimização para 3 visitas
✅ RouteOptimizer inicializado. Google Maps disponível: True
📍 Pontos convertidos: 3
   1. Porto Belo - Porto Belo - Prefeitura
   2. Bombinhas - Bombinhas - Prefeitura - Vigilância Sanitária
   3. Bombinhas - Bombinhas - Captação - Prefeitura
🚀 Iniciando otimização com Google Maps...
DEBUG: distance_matrix['distances'] é tipo: <class 'list'>
DEBUG: Matrix é 3x3
DEBUG: Somando distância[1][0]: 8.60km
DEBUG: ✅ Usando APENAS distância real da Google Maps: 8.60km
✅ Resultado da otimização: sucesso=True
💾 Backup automático criado: 20250706_230250
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
🛑 Sistema de backup automático parado
INFO:werkzeug: * Restarting with stat
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
⚠️ Google Maps API não disponível: geocode() got an unexpected keyword argument 'timeout'
INFO:gestao_visitas.services.redis_cache:🎭 Redis não disponível (Error 111 connecting to localhost:6379. Connection...), usando simulador automático
INFO:gestao_visitas.services.redis_simulator:🚀 Redis Simulator iniciado com sucesso
INFO:gestao_visitas.services.redis_simulator:🔌 Redis Simulator Client conectado (simulando localhost:6379/db0)
INFO:gestao_visitas.services.redis_simulator:🎭 Usando Redis Simulator em vez de redis://localhost:6379/0
INFO:gestao_visitas.services.redis_simulator:🚀 Redis Simulator iniciado com sucesso
INFO:gestao_visitas.services.redis_simulator:🔌 Redis Simulator Client conectado (simulando localhost:6379/db0)
INFO:gestao_visitas.services.redis_cache:🚀 Redis Simulator ativado com sucesso - performance total!
INFO:googlemaps.client:API queries_quota: 60
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 216-667-060
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:06:03] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:08:02] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:08:03] "GET /api/visitas/progresso-mapa HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:08:04] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:10:03] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:12:02] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:13:03] "GET /api/visitas/progresso-mapa HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:13:03] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug: * Detected change in '/mnt/c/users/ggmob/Cursor AI/Verificação Informantes PNSB/Agente IA/gestao_visitas/services/route_optimizer.py', reloading
=== INICIANDO APP.PY CORRETO ===
✅ Compressão Flask-Compress ativada
✅ Arquivo .env carregado com sucesso
✅ Serviços PNSB inicializados com sucesso
✅ Google Maps API configurado com sucesso
💾 Backup automático criado: 20250706_230601
🔒 Sistema de backup automático iniciado
   📁 Diretório: gestao_visitas/backups_automaticos
   ⏰ Intervalo: 300 segundos
🔒 Sistema de backup automático ativado - suas visitas estão protegidas!
💰 Chat IA desabilitado para economizar custos. Defina CHAT_IA_HABILITADO=true para habilitar.
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
💾 Backup automático criado: 20250706_231115
--- INICIANDO GET /api/visitas ---
Qtd visitas encontradas: 9
--- FIM GET /api/visitas ---
🛑 Sistema de backup automático parado
INFO:werkzeug: * Restarting with stat
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
⚠️ Google Maps API não disponível: geocode() got an unexpected keyword argument 'timeout'
INFO:gestao_visitas.services.redis_cache:🎭 Redis não disponível (Error 111 connecting to localhost:6379. Connection...), usando simulador automático
INFO:gestao_visitas.services.redis_simulator:🚀 Redis Simulator iniciado com sucesso
INFO:gestao_visitas.services.redis_simulator:🔌 Redis Simulator Client conectado (simulando localhost:6379/db0)
INFO:gestao_visitas.services.redis_simulator:🎭 Usando Redis Simulator em vez de redis://localhost:6379/0
INFO:gestao_visitas.services.redis_simulator:🚀 Redis Simulator iniciado com sucesso
INFO:gestao_visitas.services.redis_simulator:🔌 Redis Simulator Client conectado (simulando localhost:6379/db0)
INFO:gestao_visitas.services.redis_cache:🚀 Redis Simulator ativado com sucesso - performance total!
INFO:googlemaps.client:API queries_quota: 60
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 216-667-060
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:14:03] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug: * Detected change in '/mnt/c/users/ggmob/Cursor AI/Verificação Informantes PNSB/Agente IA/gestao_visitas/services/route_optimizer.py', reloading
=== INICIANDO APP.PY CORRETO ===
✅ Compressão Flask-Compress ativada
✅ Arquivo .env carregado com sucesso
✅ Serviços PNSB inicializados com sucesso
✅ Google Maps API configurado com sucesso
💾 Backup automático criado: 20250706_231321
🔒 Sistema de backup automático iniciado
   📁 Diretório: gestao_visitas/backups_automaticos
   ⏰ Intervalo: 300 segundos
🔒 Sistema de backup automático ativado - suas visitas estão protegidas!
💰 Chat IA desabilitado para economizar custos. Defina CHAT_IA_HABILITADO=true para habilitar.
🛑 Sistema de backup automático parado
INFO:werkzeug: * Restarting with stat
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
⚠️ Google Maps API não disponível: geocode() got an unexpected keyword argument 'timeout'
INFO:gestao_visitas.services.redis_cache:🎭 Redis não disponível (Error 111 connecting to localhost:6379. Connection...), usando simulador automático
INFO:gestao_visitas.services.redis_simulator:🚀 Redis Simulator iniciado com sucesso
INFO:gestao_visitas.services.redis_simulator:🔌 Redis Simulator Client conectado (simulando localhost:6379/db0)
INFO:gestao_visitas.services.redis_simulator:🎭 Usando Redis Simulator em vez de redis://localhost:6379/0
INFO:gestao_visitas.services.redis_simulator:🚀 Redis Simulator iniciado com sucesso
INFO:gestao_visitas.services.redis_simulator:🔌 Redis Simulator Client conectado (simulando localhost:6379/db0)
INFO:gestao_visitas.services.redis_cache:🚀 Redis Simulator ativado com sucesso - performance total!
INFO:googlemaps.client:API queries_quota: 60
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
'FLASK_ENV' is deprecated and will not be used in Flask 2.3. Use 'FLASK_DEBUG' instead.
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 216-667-060
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:16:02] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:16:02] "GET /mapa-progresso HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:16:02] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:16:02] "GET /static/js/pwa.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:16:02] "GET /static/js/breadcrumbs-init.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:16:02] "GET /static/js/components.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:16:02] "GET /static/js/health-check.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:16:02] "GET /static/css/design-system.css HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:16:03] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:16:03] "GET /mapa-progresso HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:16:03] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:16:03] "GET /static/js/pwa.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:16:03] "GET /static/js/health-check.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:16:03] "GET /static/js/components.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:16:03] "GET /static/js/breadcrumbs-init.js?v=2.0 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:16:03] "GET /static/css/design-system.css HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:16:05] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:16:06] "GET /api/visitas/progresso-mapa HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:16:07] "GET /api/visitas/progresso-mapa HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:16:07] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:16:07] "GET /api/visitas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:16:07] "GET /api/alertas/criticos HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:16:11] "GET /api/google-maps-config HTTP/1.1" 200 -
INFO:gestao_visitas.services.offline_maps_service:🗺️ Databases de cache offline inicializados
INFO:googlemaps.client:API queries_quota: 60
INFO:gestao_visitas.services.offline_maps_service:🗺️ Google Maps API inicializada para cache offline
INFO:googlemaps.client:API queries_quota: 60
INFO:gestao_visitas.services.route_optimizer:🗺️ Google Maps API inicializada e testada com sucesso
INFO:gestao_visitas.services.route_optimizer:🗺️ Iniciando otimização Nível 3 com 3 pontos
INFO:gestao_visitas.services.route_optimizer:🕰️ Buscando horários de atendimento reais...
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Porto Belo - Prefeitura, Porto Belo, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Porto Belo - Prefeitura: {'is_open_now': False, 'weekday_text': ['Monday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Tuesday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Wednesday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Thursday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Friday: 8:00\u202fAM\u2009–\u200912:00\u202fPM, 1:00\u2009–\u20095:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1200'}, 'open': {'day': 1, 'time': '0800'}}, {'close': {'day': 1, 'time': '1700'}, 'open': {'day': 1, 'time': '1300'}}, {'close': {'day': 2, 'time': '1200'}, 'open': {'day': 2, 'time': '0800'}}, {'close': {'day': 2, 'time': '1700'}, 'open': {'day': 2, 'time': '1300'}}, {'close': {'day': 3, 'time': '1200'}, 'open': {'day': 3, 'time': '0800'}}, {'close': {'day': 3, 'time': '1700'}, 'open': {'day': 3, 'time': '1300'}}, {'close': {'day': 4, 'time': '1200'}, 'open': {'day': 4, 'time': '0800'}}, {'close': {'day': 4, 'time': '1700'}, 'open': {'day': 4, 'time': '1300'}}, {'close': {'day': 5, 'time': '1200'}, 'open': {'day': 5, 'time': '0800'}}, {'close': {'day': 5, 'time': '1700'}, 'open': {'day': 5, 'time': '1300'}}], 'today_open': '08:00', 'today_close': '12:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Bombinhas - Prefeitura - Vigilância Sanitária, Bombinhas, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Bombinhas - Prefeitura - Vigilância Sanitária: {'is_open_now': False, 'weekday_text': ['Monday: 12:00\u2009–\u20095:00\u202fPM', 'Tuesday: 12:00\u2009–\u20095:00\u202fPM', 'Wednesday: 12:00\u2009–\u20095:00\u202fPM', 'Thursday: 12:00\u2009–\u20095:00\u202fPM', 'Friday: 12:00\u2009–\u20095:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1700'}, 'open': {'day': 1, 'time': '1200'}}, {'close': {'day': 2, 'time': '1700'}, 'open': {'day': 2, 'time': '1200'}}, {'close': {'day': 3, 'time': '1700'}, 'open': {'day': 3, 'time': '1200'}}, {'close': {'day': 4, 'time': '1700'}, 'open': {'day': 4, 'time': '1200'}}, {'close': {'day': 5, 'time': '1700'}, 'open': {'day': 5, 'time': '1200'}}], 'today_open': '12:00', 'today_close': '17:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:🔍 Buscando horários para: Bombinhas - Captação - Prefeitura, Bombinhas, SC, Brazil
INFO:gestao_visitas.services.route_optimizer:✅ Horários encontrados para Bombinhas - Captação - Prefeitura: {'is_open_now': False, 'weekday_text': ['Monday: 12:00\u2009–\u20096:00\u202fPM', 'Tuesday: 12:00\u2009–\u20096:00\u202fPM', 'Wednesday: 12:00\u2009–\u20096:00\u202fPM', 'Thursday: 12:00\u2009–\u20096:00\u202fPM', 'Friday: 12:00\u2009–\u20096:00\u202fPM', 'Saturday: Closed', 'Sunday: Closed'], 'periods': [{'close': {'day': 1, 'time': '1800'}, 'open': {'day': 1, 'time': '1200'}}, {'close': {'day': 2, 'time': '1800'}, 'open': {'day': 2, 'time': '1200'}}, {'close': {'day': 3, 'time': '1800'}, 'open': {'day': 3, 'time': '1200'}}, {'close': {'day': 4, 'time': '1800'}, 'open': {'day': 4, 'time': '1200'}}, {'close': {'day': 5, 'time': '1800'}, 'open': {'day': 5, 'time': '1200'}}], 'today_open': '12:00', 'today_close': '18:00', 'is_open_target_day': True}
INFO:gestao_visitas.services.route_optimizer:✅ Matriz do Google Maps obtida: 3x3
INFO:gestao_visitas.services.route_optimizer:🕰️ Ajustando visita para abertura: 12:00
INFO:gestao_visitas.services.route_optimizer:🔍 COMPARAÇÃO DE PONTOS:
INFO:gestao_visitas.services.route_optimizer:   optimized_points: ['Porto Belo', 'Bombinhas', 'Bombinhas']
INFO:gestao_visitas.services.route_optimizer:   route_with_schedule: ['Porto Belo', 'Bombinhas', 'Bombinhas']
INFO:gestao_visitas.services.route_optimizer:✅ Otimização Nível 3 concluída com sucesso
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:16:15] "POST /api/otimizar-rotas HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [06/Jul/2025 23:18:06] "GET /api/alertas/criticos HTTP/1.1" 200 -
